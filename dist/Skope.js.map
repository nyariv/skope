{"version":3,"file":"Skope.js","sources":["../node_modules/@nyariv/sandboxjs/dist/node/Sandbox.js","../src/eQuery.ts","../src/HTMLSanitizer.ts","../src/Skope.ts"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * Parse a string as a base-16 number. This is more strict than `parseInt` as it\n * will not allow any other characters, including (for example) \"+\", \"-\", and\n * \".\".\n * @param hex A string containing a hexadecimal number.\n * @returns The parsed integer, or `NaN` if the string is not a valid hex\n * number.\n */\nfunction parseHexToInt(hex) {\n    const isOnlyHexChars = !hex.match(/[^a-f0-9]/i);\n    return isOnlyHexChars ? parseInt(hex, 16) : NaN;\n}\n/**\n * Check the validity and length of a hexadecimal code and optionally enforces\n * a specific number of hex digits.\n * @param hex The string to validate and parse.\n * @param errorName The name of the error message to throw a `SyntaxError` with\n * if `hex` is invalid. This is used to index `errorMessages`.\n * @param enforcedLength If provided, will throw an error if `hex` is not\n * exactly this many characters.\n * @returns The parsed hex number as a normal number.\n * @throws {SyntaxError} If the code is not valid.\n */\nfunction validateAndParseHex(hex, errorName, enforcedLength) {\n    const parsedHex = parseHexToInt(hex);\n    if (Number.isNaN(parsedHex) ||\n        (enforcedLength !== undefined && enforcedLength !== hex.length)) {\n        throw new SyntaxError(errorName + ': ' + hex);\n    }\n    return parsedHex;\n}\n/**\n * Parse a two-digit hexadecimal character escape code.\n * @param code The two-digit hexadecimal number that represents the character to\n * output.\n * @returns The single character represented by the code.\n * @throws {SyntaxError} If the code is not valid hex or is not the right\n * length.\n */\nfunction parseHexadecimalCode(code) {\n    const parsedCode = validateAndParseHex(code, 'Malformed Hexadecimal', 2);\n    return String.fromCharCode(parsedCode);\n}\n/**\n * Parse a four-digit Unicode character escape code.\n * @param code The four-digit unicode number that represents the character to\n * output.\n * @param surrogateCode Optional four-digit unicode surrogate that represents\n * the other half of the character to output.\n * @returns The single character represented by the code.\n * @throws {SyntaxError} If the codes are not valid hex or are not the right\n * length.\n */\nfunction parseUnicodeCode(code, surrogateCode) {\n    const parsedCode = validateAndParseHex(code, 'Malformed Unicode', 4);\n    if (surrogateCode !== undefined) {\n        const parsedSurrogateCode = validateAndParseHex(surrogateCode, 'Malformed Unicode', 4);\n        return String.fromCharCode(parsedCode, parsedSurrogateCode);\n    }\n    return String.fromCharCode(parsedCode);\n}\n/**\n * Test if the text is surrounded by curly braces (`{}`).\n * @param text Text to check.\n * @returns `true` if the text is in the form `{*}`.\n */\nfunction isCurlyBraced(text) {\n    return text.charAt(0) === \"{\" && text.charAt(text.length - 1) === \"}\";\n}\n/**\n * Parse a Unicode code point character escape code.\n * @param codePoint A unicode escape code point, including the surrounding curly\n * braces.\n * @returns The single character represented by the code.\n * @throws {SyntaxError} If the code is not valid hex or does not have the\n * surrounding curly braces.\n */\nfunction parseUnicodeCodePointCode(codePoint) {\n    if (!isCurlyBraced(codePoint)) {\n        throw new SyntaxError('Malformed Unicode: +' + codePoint);\n    }\n    const withoutBraces = codePoint.slice(1, -1);\n    const parsedCode = validateAndParseHex(withoutBraces, 'Malformed Unicode');\n    try {\n        return String.fromCodePoint(parsedCode);\n    }\n    catch (err) {\n        throw err instanceof RangeError\n            ? new SyntaxError('Code Point Limit:' + parsedCode)\n            : err;\n    }\n}\n/**\n * Map of unescaped letters to their corresponding special JS escape characters.\n * Intentionally does not include characters that map to themselves like \"\\'\".\n */\nconst singleCharacterEscapes = new Map([\n    [\"b\", \"\\b\"],\n    [\"f\", \"\\f\"],\n    [\"n\", \"\\n\"],\n    [\"r\", \"\\r\"],\n    [\"t\", \"\\t\"],\n    [\"v\", \"\\v\"],\n    [\"0\", \"\\0\"]\n]);\n/**\n * Parse a single character escape sequence and return the matching character.\n * If none is matched, defaults to `code`.\n * @param code A single character code.\n */\nfunction parseSingleCharacterCode(code) {\n    return singleCharacterEscapes.get(code) || code;\n}\n/**\n * Matches every escape sequence possible, including invalid ones.\n *\n * All capture groups (described below) are unique (only one will match), except\n * for 4, which can only potentially match if 3 does.\n *\n * **Capture Groups:**\n * 0. A single backslash\n * 1. Hexadecimal code\n * 2. Unicode code point code with surrounding curly braces\n * 3. Unicode escape code with surrogate\n * 4. Surrogate code\n * 5. Unicode escape code without surrogate\n * 6. Octal code _NOTE: includes \"0\"._\n * 7. A single character (will never be \\, x, u, or 0-3)\n */\nconst escapeMatch = /\\\\(?:(\\\\)|x([\\s\\S]{0,2})|u(\\{[^}]*\\}?)|u([\\s\\S]{4})\\\\u([^{][\\s\\S]{0,3})|u([\\s\\S]{0,4})|([0-3]?[0-7]{1,2})|([\\s\\S])|$)/g;\n/**\n * Replace raw escape character strings with their escape characters.\n * @param raw A string where escape characters are represented as raw string\n * values like `\\'` rather than `'`.\n * @param allowOctals If `true`, will process the now-deprecated octal escape\n * sequences (ie, `\\111`).\n * @returns The processed string, with escape characters replaced by their\n * respective actual Unicode characters.\n */\nfunction unraw(raw) {\n    return raw.replace(escapeMatch, function (_, backslash, hex, codePoint, unicodeWithSurrogate, surrogate, unicode, octal, singleCharacter) {\n        // Compare groups to undefined because empty strings mean different errors\n        // Otherwise, `\\u` would fail the same as `\\` which is wrong.\n        if (backslash !== undefined) {\n            return \"\\\\\";\n        }\n        if (hex !== undefined) {\n            return parseHexadecimalCode(hex);\n        }\n        if (codePoint !== undefined) {\n            return parseUnicodeCodePointCode(codePoint);\n        }\n        if (unicodeWithSurrogate !== undefined) {\n            return parseUnicodeCode(unicodeWithSurrogate, surrogate);\n        }\n        if (unicode !== undefined) {\n            return parseUnicodeCode(unicode);\n        }\n        if (octal === \"0\") {\n            return \"\\0\";\n        }\n        if (octal !== undefined) {\n            throw new SyntaxError('Octal Deprecation: ' + octal);\n        }\n        if (singleCharacter !== undefined) {\n            return parseSingleCharacterCode(singleCharacter);\n        }\n        throw new SyntaxError('End of string');\n    });\n}\n\nlet lispTypes = new Map();\nclass ParseError extends Error {\n    constructor(message, code) {\n        super(message + \": \" + code.substring(0, 40));\n        this.code = code;\n    }\n}\nclass Lisp {\n    constructor(obj) {\n        this.op = obj.op;\n        this.a = obj.a;\n        this.b = obj.b;\n    }\n}\nclass If {\n    constructor(t, f) {\n        this.t = t;\n        this.f = f;\n    }\n}\nclass KeyVal {\n    constructor(key, val) {\n        this.key = key;\n        this.val = val;\n    }\n}\nclass SpreadObject {\n    constructor(item) {\n        this.item = item;\n    }\n}\nclass SpreadArray {\n    constructor(item) {\n        this.item = item;\n    }\n}\nconst lispArrayKey = {};\nfunction toLispArray(arr) {\n    arr.lisp = lispArrayKey;\n    return arr;\n}\nconst inlineIfElse = /^:/;\nconst elseIf = /^else(?![\\w\\$])/;\nconst ifElse = /^if(?![\\w\\$])/;\nconst space = /^\\s/;\nlet expectTypes = {\n    splitter: {\n        types: {\n            opHigh: /^(\\/|\\*\\*|\\*(?!\\*)|\\%)(?!\\=)/,\n            op: /^(\\+(?!(\\+))|\\-(?!(\\-)))(?!\\=)/,\n            comparitor: /^(<=|>=|<(?!<)|>(?!>)|!==|!=(?!\\=)|===|==)/,\n            boolOp: /^(&&|\\|\\||instanceof(?![\\w\\$])|in(?![\\w\\$]))/,\n            bitwise: /^(&(?!&)|\\|(?!\\|)|\\^|<<|>>(?!>)|>>>)(?!\\=)/,\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    inlineIf: {\n        types: {\n            inlineIf: /^\\?(?!\\.(?!\\d))/,\n        },\n        next: [\n            'expEnd'\n        ]\n    },\n    assignment: {\n        types: {\n            assignModify: /^(\\-=|\\+=|\\/=|\\*\\*=|\\*=|%=|\\^=|\\&=|\\|=|>>>=|>>=|<<=)/,\n            assign: /^(=)(?!=)/\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    incrementerBefore: {\n        types: { incrementerBefore: /^(\\+\\+|\\-\\-)/ },\n        next: [\n            'prop',\n        ]\n    },\n    expEdge: {\n        types: {\n            call: /^(\\?\\.)?[\\(]/,\n            incrementerAfter: /^(\\+\\+|\\-\\-)/\n        },\n        next: [\n            'splitter',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    modifier: {\n        types: {\n            not: /^!/,\n            inverse: /^~/,\n            negative: /^\\-(?!\\-)/,\n            positive: /^\\+(?!\\+)/,\n            typeof: /^typeof(?![\\w\\$])/,\n            delete: /^delete(?![\\w\\$])/,\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n        ]\n    },\n    dot: {\n        types: {\n            arrayProp: /^(\\?\\.)?\\[/,\n            dot: /^(\\?)?\\.(?=\\s*[a-zA-Z\\$\\_])/,\n        },\n        next: [\n            'splitter',\n            'assignment',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    prop: {\n        types: {\n            prop: /^[a-zA-Z\\$\\_][a-zA-Z\\d\\$\\_]*/,\n        },\n        next: [\n            'splitter',\n            'assignment',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    value: {\n        types: {\n            createObject: /^\\{/,\n            createArray: /^\\[/,\n            number: /^(0x[\\da-f]+(_[\\da-f]+)*|(\\d+(_\\d+)*(\\.\\d+(_\\d+)*)?|\\.\\d+(_\\d+)*))(e[\\+\\-]?\\d+(_\\d+)*)?(n)?(?!\\d)/i,\n            string: /^\"(\\d+)\"/,\n            literal: /^`(\\d+)`/,\n            regex: /^\\/(\\d+)\\/r(?![\\w\\$])/,\n            boolean: /^(true|false)(?![\\w\\$])/,\n            null: /^null(?![\\w\\$])/,\n            und: /^undefined(?![\\w\\$])/,\n            arrowFunctionSingle: /^(async\\s+)?([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*=>\\s*({)?/,\n            arrowFunction: /^(async\\s*)?\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*=>\\s*({)?/,\n            inlineFunction: /^(async\\s+)?function(\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)?\\s*\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*{/,\n            group: /^\\(/,\n            NaN: /^NaN(?![\\w\\$])/,\n            Infinity: /^Infinity(?![\\w\\$])/,\n            void: /^void(?![\\w\\$])\\s*/,\n            await: /^await(?![\\w\\$])\\s*/,\n            new: /^new(?![\\w\\$])\\s*/,\n            throw: /^throw(?![\\w\\$])\\s*/\n        },\n        next: [\n            'splitter',\n            'expEdge',\n            'dot',\n            'inlineIf',\n            'expEnd'\n        ]\n    },\n    initialize: {\n        types: {\n            initialize: /^(var|let|const)\\s+([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*(=)?/,\n            return: /^return(?![\\w\\$])/,\n        },\n        next: [\n            'modifier',\n            'value',\n            'prop',\n            'incrementerBefore',\n            'expEnd'\n        ]\n    },\n    spreadObject: {\n        types: {\n            spreadObject: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'prop',\n        ]\n    },\n    spreadArray: {\n        types: {\n            spreadArray: /^\\.\\.\\./\n        },\n        next: [\n            'value',\n            'prop',\n        ]\n    },\n    expEnd: { types: {}, next: [] },\n    expFunction: {\n        types: {\n            function: /^(async\\s+)?function(\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*\\(\\s*((\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*(\\s*,\\s*(\\.\\.\\.)?\\s*[a-zA-Z\\$_][a-zA-Z\\d\\$_]*)*)?\\s*\\)\\s*{/,\n        },\n        next: [\n            'expEdge',\n            'expEnd'\n        ]\n    },\n    expSingle: {\n        types: {\n            for: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*for\\s*\\(/,\n            do: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*do(?![\\w\\$])\\s*(\\{)?/,\n            while: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*while\\s*\\(/,\n            loopAction: /^(break|continue)(?![\\w\\$])\\s*([a-zA-Z\\$\\_][\\w\\$]*)?/,\n            if: /^((([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*)if\\s*\\(/,\n            try: /^try\\s*{/,\n            block: /^{/,\n            switch: /^(([a-zA-Z\\$\\_][\\w\\$]*)\\s*:)?\\s*switch\\s*\\(/,\n        },\n        next: [\n            'expEnd'\n        ]\n    }\n};\nlet closings = {\n    \"(\": \")\",\n    \"[\": \"]\",\n    \"{\": \"}\",\n    \"'\": \"'\",\n    '\"': '\"',\n    \"`\": \"`\"\n};\nfunction testMultiple(str, tests) {\n    let found;\n    for (let i = 0; i < tests.length; i++) {\n        const test = tests[i];\n        found = test.exec(str);\n        if (found)\n            break;\n    }\n    return found;\n}\nclass CodeString {\n    constructor(str) {\n        this.ref = { str: \"\" };\n        if (str instanceof CodeString) {\n            this.ref = str.ref;\n            this.start = str.start;\n            this.end = str.end;\n        }\n        else {\n            this.ref.str = str;\n            this.start = 0;\n            this.end = str.length;\n        }\n    }\n    substring(start, end) {\n        if (!this.length)\n            return this;\n        start = this.start + start;\n        if (start < 0) {\n            start = 0;\n        }\n        if (start > this.end) {\n            start = this.end;\n        }\n        end = end === undefined ? this.end : this.start + end;\n        if (end < 0) {\n            end = 0;\n        }\n        if (end > this.end) {\n            end = this.end;\n        }\n        const code = new CodeString(this);\n        code.start = start;\n        code.end = end;\n        return code;\n    }\n    get length() {\n        const len = this.end - this.start;\n        return len < 0 ? 0 : len;\n    }\n    char(i) {\n        if (this.start === this.end)\n            return undefined;\n        return this.ref.str[this.start + i];\n    }\n    toString() {\n        return this.ref.str.substring(this.start, this.end);\n    }\n    trimStart() {\n        const found = /^\\s+/.exec(this.toString());\n        const code = new CodeString(this);\n        if (found) {\n            code.start += found[0].length;\n        }\n        return code;\n    }\n    slice(start, end) {\n        if (start < 0) {\n            start = this.end - this.start + start;\n        }\n        if (start < 0) {\n            start = 0;\n        }\n        if (end === undefined) {\n            end = this.end - this.start;\n        }\n        if (end < 0) {\n            end = this.end - this.start + end;\n        }\n        if (end < 0) {\n            end = 0;\n        }\n        return this.substring(start, end);\n    }\n    trim() {\n        const code = this.trimStart();\n        const found = /\\s+$/.exec(code.toString());\n        if (found) {\n            code.end -= found[0].length;\n        }\n        return code;\n    }\n    valueOf() {\n        return this.toString();\n    }\n}\nconst emptyString = new CodeString(\"\");\nconst okFirstChars = /^[\\+\\-~ !]/;\nconst aNumber = expectTypes.value.types.number;\nconst wordReg = /^((if|for|else|while|do|function)(?![\\w\\$])|[\\w\\$]+)/;\nconst semiColon = /^;/;\nconst insertedSemicolons = new WeakMap();\nconst quoteCache = new WeakMap();\nfunction restOfExp(constants, part, tests, quote, firstOpening, closingsTests, details = {}) {\n    if (!part.length) {\n        return part;\n    }\n    details.words = details.words || [];\n    let isStart = true;\n    tests = tests || [];\n    const hasSemiTest = tests.includes(semiColon);\n    if (hasSemiTest) {\n        tests = tests.filter((a) => a !== semiColon);\n    }\n    const insertedSemis = insertedSemicolons.get(part.ref) || [];\n    const cache = quoteCache.get(part.ref) || new Map();\n    quoteCache.set(part.ref, cache);\n    if (quote && cache.has(part.start - 1)) {\n        return part.substring(0, cache.get(part.start - 1) - part.start);\n    }\n    let escape = false;\n    let done = false;\n    let lastChar = \"\";\n    let isOneLiner = false;\n    let i;\n    let lastInertedSemi = false;\n    for (i = 0; i < part.length && !done; i++) {\n        let char = part.char(i);\n        if (quote === '\"' || quote === \"'\" || quote === \"`\") {\n            if (quote === \"`\" && char === \"$\" && part.char(i + 1) === \"{\" && !escape) {\n                let skip = restOfExp(constants, part.substring(i + 2), [], \"{\");\n                i += skip.length + 2;\n            }\n            else if (char === quote && !escape) {\n                return part.substring(0, i);\n            }\n            escape = !escape && char === \"\\\\\";\n        }\n        else if (closings[char]) {\n            if (!lastInertedSemi && insertedSemis[i + part.start]) {\n                lastInertedSemi = true;\n                if (hasSemiTest) {\n                    break;\n                }\n                i--;\n                lastChar = ';';\n                continue;\n            }\n            if (isOneLiner && char === \"{\") {\n                isOneLiner = false;\n            }\n            if (char === firstOpening) {\n                done = true;\n                break;\n            }\n            else {\n                let skip = restOfExp(constants, part.substring(i + 1), [], char);\n                cache.set(skip.start - 1, skip.end);\n                i += skip.length + 1;\n                isStart = false;\n                if (closingsTests) {\n                    let sub = part.substring(i);\n                    let found;\n                    if (found = testMultiple(sub.toString(), closingsTests)) {\n                        details.regRes = found;\n                        done = true;\n                    }\n                }\n            }\n        }\n        else if (!quote) {\n            let sub = part.substring(i).toString();\n            let foundWord;\n            let foundNumber;\n            if (closingsTests) {\n                let found;\n                if (found = testMultiple(sub, closingsTests)) {\n                    details.regRes = found;\n                    i++;\n                    done = true;\n                    break;\n                }\n            }\n            if (foundNumber = aNumber.exec(sub)) {\n                i += foundNumber[0].length - 1;\n                sub = part.substring(i).toString();\n            }\n            else if (lastChar != char) {\n                let found;\n                if (char === ';' || (insertedSemis[i + part.start] && !isStart && !lastInertedSemi)) {\n                    if (hasSemiTest) {\n                        found = [\";\"];\n                    }\n                    else if (insertedSemis[i + part.start]) {\n                        lastInertedSemi = true;\n                        i--;\n                        lastChar = ';';\n                        continue;\n                    }\n                    char = sub = ';';\n                }\n                else {\n                    lastInertedSemi = false;\n                }\n                if (!found) {\n                    found = testMultiple(sub, tests);\n                }\n                if (found) {\n                    done = true;\n                }\n                if (!done && (foundWord = wordReg.exec(sub))) {\n                    isOneLiner = true;\n                    if (foundWord[0].length > 1) {\n                        details.words.push(foundWord[1]);\n                        details.lastAnyWord = foundWord[1];\n                        if (foundWord[2]) {\n                            details.lastWord = foundWord[2];\n                        }\n                    }\n                    if (foundWord[0].length > 2) {\n                        i += foundWord[0].length - 2;\n                    }\n                }\n            }\n            if (isStart) {\n                if (okFirstChars.test(sub)) {\n                    done = false;\n                }\n                else {\n                    isStart = false;\n                }\n            }\n            if (done)\n                break;\n        }\n        else if (char === closings[quote]) {\n            return part.substring(0, i);\n        }\n        lastChar = char;\n    }\n    if (quote) {\n        throw new SyntaxError(\"Unclosed '\" + quote + \"'\");\n    }\n    if (details) {\n        details.oneliner = isOneLiner;\n    }\n    return part.substring(0, i);\n}\nrestOfExp.next = [\n    'splitter',\n    'expEnd',\n    'inlineIf'\n];\nconst startingExecpted = ['initialize', 'expSingle', 'expFunction', 'value', 'modifier', 'prop', 'incrementerBefore', 'expEnd'];\nconst setLispType = (types, fn) => {\n    types.forEach((type) => {\n        lispTypes.set(type, fn);\n    });\n};\nconst closingsCreate = {\n    'createArray': /^\\]/,\n    'createObject': /^\\}/,\n    'group': /^\\)/,\n    'arrayProp': /^\\]/,\n    'call': /^\\)/\n};\nsetLispType(['createArray', 'createObject', 'group', 'arrayProp', 'call'], (constants, type, part, res, expect, ctx) => {\n    let extract = emptyString;\n    let arg = [];\n    let end = false;\n    let i = res[0].length;\n    const start = i;\n    while (i < part.length && !end) {\n        extract = restOfExp(constants, part.substring(i), [\n            closingsCreate[type],\n            /^,/\n        ]);\n        i += extract.length;\n        if (extract.length) {\n            arg.push(extract);\n        }\n        if (part.char(i) !== ',') {\n            end = true;\n        }\n        else {\n            i++;\n        }\n    }\n    const next = ['value', 'modifier', 'prop', 'incrementerBefore', 'expEnd'];\n    let l;\n    let funcFound;\n    switch (type) {\n        case 'group':\n        case 'arrayProp':\n            l = lispifyExpr(constants, part.substring(start, i));\n            break;\n        case 'call':\n        case 'createArray':\n            // @TODO: support 'empty' values\n            l = toLispArray(arg.map((e) => lispify(constants, e, [...next, 'spreadArray'])));\n            break;\n        case 'createObject':\n            l = toLispArray(arg.map((str) => {\n                str = str.trimStart();\n                let value;\n                let key;\n                funcFound = expectTypes.expFunction.types.function.exec('function ' + str);\n                if (funcFound) {\n                    key = funcFound[2].trimStart();\n                    value = lispify(constants, new CodeString('function ' + str.toString().replace(key, \"\")));\n                }\n                else {\n                    let extract = restOfExp(constants, str, [/^:/]);\n                    key = lispify(constants, extract, [...next, 'spreadObject']);\n                    if (key instanceof Lisp && key.op === 'prop') {\n                        key = key.b;\n                    }\n                    if (extract.length === str.length)\n                        return key;\n                    value = lispify(constants, str.substring(extract.length + 1));\n                }\n                return new Lisp({\n                    op: 'keyVal',\n                    a: key,\n                    b: value\n                });\n            }));\n            break;\n    }\n    type = type === 'arrayProp' ? (res[1] ? '?prop' : 'prop') : (type === 'call' ? (res[1] ? '?call' : 'call') : type);\n    ctx.lispTree = lispify(constants, part.substring(i + 1), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: ctx.lispTree,\n        b: l,\n    }));\n});\nsetLispType(['inverse', 'not', 'negative', 'positive', 'typeof', 'delete'], (constants, type, part, res, expect, ctx) => {\n    let extract = restOfExp(constants, part.substring(res[0].length), [/^([^\\s\\.\\?\\w\\$]|\\?[^\\.])/]);\n    ctx.lispTree = lispify(constants, part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: ['positive', 'negative'].includes(type) ? '$' + res[0] : res[0],\n        a: ctx.lispTree,\n        b: lispify(constants, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerBefore'], (constants, type, part, res, expect, ctx) => {\n    let extract = restOfExp(constants, part.substring(2), [/^[^\\s\\.\\w\\$]/]);\n    ctx.lispTree = lispify(constants, part.substring(extract.length + 2), restOfExp.next, new Lisp({\n        op: res[0] + \"$\",\n        a: lispify(constants, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['incrementerAfter'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: \"$\" + res[0],\n        a: ctx.lispTree,\n    }));\n});\nsetLispType(['assign', 'assignModify', 'boolOp'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(constants, part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['opHigh', 'op', 'comparitor', 'bitwise'], (constants, type, part, res, expect, ctx) => {\n    const next = [\n        expectTypes.inlineIf.types.inlineIf,\n        inlineIfElse\n    ];\n    switch (type) {\n        case 'opHigh':\n            next.push(expectTypes.splitter.types.opHigh);\n        case 'op':\n            next.push(expectTypes.splitter.types.op);\n        case 'comparitor':\n            next.push(expectTypes.splitter.types.comparitor);\n        case 'bitwise':\n            next.push(expectTypes.splitter.types.bitwise);\n            next.push(expectTypes.splitter.types.boolOp);\n    }\n    let extract = restOfExp(constants, part.substring(res[0].length), next);\n    ctx.lispTree = lispify(constants, part.substring(extract.length + res[0].length), restOfExp.next, new Lisp({\n        op: res[0],\n        a: ctx.lispTree,\n        b: lispify(constants, extract, expectTypes[expect].next),\n    }));\n});\nsetLispType(['inlineIf'], (constants, type, part, res, expect, ctx) => {\n    let found = false;\n    let extract = part.substring(0, 0);\n    let quoteCount = 1;\n    while (!found && extract.length < part.length) {\n        extract.end = restOfExp(constants, part.substring(extract.length + 1), [\n            expectTypes.inlineIf.types.inlineIf,\n            inlineIfElse\n        ]).end;\n        if (part.char(extract.length) === '?') {\n            quoteCount++;\n        }\n        else {\n            quoteCount--;\n        }\n        if (!quoteCount) {\n            found = true;\n        }\n    }\n    extract.start = part.start + 1;\n    ctx.lispTree = new Lisp({\n        op: '?',\n        a: ctx.lispTree,\n        b: new If(lispifyExpr(constants, extract), lispifyExpr(constants, part.substring(res[0].length + extract.length + 1)))\n    });\n});\nfunction extractIfElse(constants, part) {\n    var _a;\n    let count = 0;\n    let found = part.substring(0, 0);\n    let foundElse = emptyString;\n    let foundTrue;\n    let first = true;\n    let elseReg;\n    let details = {};\n    while ((found = restOfExp(constants, part.substring(found.end - part.start), [elseIf, ifElse, semiColon], undefined, undefined, undefined, details)).length || first) {\n        first = false;\n        const f = part.substring(found.end - part.start).toString();\n        if (f.startsWith(\"if\")) {\n            found.end++;\n            count++;\n        }\n        else if (f.startsWith('else')) {\n            foundTrue = part.substring(0, found.end - part.start);\n            found.end++;\n            count--;\n            if (!count) {\n                found.end--;\n            }\n        }\n        else if (elseReg = /^;?\\s*else(?![\\w\\$])/.exec(f)) {\n            foundTrue = part.substring(0, found.end - part.start);\n            found.end += elseReg[0].length - 1;\n            count--;\n            if (!count) {\n                found.end -= elseReg[0].length - 1;\n            }\n        }\n        else {\n            foundTrue = foundElse.length ? foundTrue : part.substring(0, found.end - part.start);\n            break;\n        }\n        if (!count) {\n            let ie = extractIfElse(constants, part.substring(found.end - part.start + ((_a = /^;?\\s*else(?![\\w\\$])/.exec(f)) === null || _a === void 0 ? void 0 : _a[0].length)));\n            foundElse = ie.all;\n            break;\n        }\n        details = {};\n    }\n    foundTrue = foundTrue || part.substring(0, found.end - part.start);\n    return { all: part.substring(0, Math.max(foundTrue.end, foundElse.end) - part.start), true: foundTrue, false: foundElse };\n}\nsetLispType(['if'], (constants, type, part, res, expect, ctx) => {\n    let condition = restOfExp(constants, part.substring(res[0].length), [], \"(\");\n    const ie = extractIfElse(constants, part.substring(res[1].length));\n    /^\\s*\\{/.exec(part.substring(res[0].length + condition.length + 1).toString());\n    const startTrue = res[0].length - res[1].length + condition.length + 1;\n    let trueBlock = ie.true.substring(startTrue);\n    let elseBlock = ie.false;\n    condition = condition.trim();\n    trueBlock = trueBlock.trim();\n    elseBlock = elseBlock.trim();\n    if (trueBlock.char(0) === \"{\")\n        trueBlock = trueBlock.slice(1, -1);\n    if (elseBlock.char(0) === \"{\")\n        elseBlock = elseBlock.slice(1, -1);\n    ctx.lispTree = new Lisp({\n        op: 'if',\n        a: lispifyExpr(constants, condition),\n        b: new If(lispifyBlock(trueBlock, constants), elseBlock.length ? lispifyBlock(elseBlock, constants) : undefined)\n    });\n});\nsetLispType(['switch'], (constants, type, part, res, expect, ctx) => {\n    const test = restOfExp(constants, part.substring(res[0].length), [], \"(\");\n    let start = part.toString().indexOf(\"{\", res[0].length + test.length + 1);\n    if (start === -1)\n        throw new SyntaxError(\"Invalid switch\");\n    let statement = insertSemicolons(constants, restOfExp(constants, part.substring(start + 1), [], \"{\"));\n    let caseFound;\n    const caseTest = /^\\s*(case\\s|default)\\s*/;\n    let cases = [];\n    let defaultFound = false;\n    while (caseFound = caseTest.exec(statement.toString())) {\n        if (caseFound[1] === 'default') {\n            if (defaultFound)\n                throw new SyntaxError(\"Only one default switch case allowed\");\n            defaultFound = true;\n        }\n        let cond = restOfExp(constants, statement.substring(caseFound[0].length), [/^:/]);\n        let found = emptyString;\n        let i = start = caseFound[0].length + cond.length + 1;\n        let bracketFound = /^\\s*\\{/.exec(statement.substring(i).toString());\n        let exprs = [];\n        if (bracketFound) {\n            i += bracketFound[0].length;\n            found = restOfExp(constants, statement.substring(i), [], \"{\");\n            i += found.length + 1;\n            exprs = lispifyBlock(found, constants);\n        }\n        else {\n            let notEmpty = restOfExp(constants, statement.substring(i), [caseTest]);\n            if (!notEmpty.trim().length) {\n                exprs = [];\n                i += notEmpty.length;\n            }\n            else {\n                while ((found = restOfExp(constants, statement.substring(i), [semiColon])).length) {\n                    i += found.length + (statement.char(i + found.length) === ';' ? 1 : 0);\n                    if (caseTest.test(statement.substring(i).toString())) {\n                        break;\n                    }\n                }\n                exprs = lispifyBlock(statement.substring(start, found.end - statement.start), constants);\n            }\n        }\n        statement = statement.substring(i);\n        cases.push(new Lisp({\n            op: \"case\",\n            a: caseFound[1] === \"default\" ? undefined : lispifyExpr(constants, cond),\n            b: toLispArray(exprs)\n        }));\n    }\n    ctx.lispTree = new Lisp({\n        op: 'switch',\n        a: lispifyExpr(constants, test),\n        b: toLispArray(cases)\n    });\n});\nsetLispType(['dot', 'prop'], (constants, type, part, res, expect, ctx) => {\n    let prop = res[0];\n    let index = res[0].length;\n    let op = 'prop';\n    if (type === 'dot') {\n        if (res[1]) {\n            op = '?prop';\n        }\n        let matches = part.substring(res[0].length).toString().match(expectTypes.prop.types.prop);\n        if (matches && matches.length) {\n            prop = matches[0];\n            index = prop.length + res[0].length;\n        }\n        else {\n            throw new SyntaxError('Hanging  dot');\n        }\n    }\n    ctx.lispTree = lispify(constants, part.substring(index), expectTypes[expect].next, new Lisp({\n        op: op,\n        a: ctx.lispTree,\n        b: prop\n    }));\n});\nsetLispType(['spreadArray', 'spreadObject'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispify(constants, part.substring(res[0].length), expectTypes[expect].next)\n    });\n});\nsetLispType(['return', 'throw'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: type,\n        b: lispifyExpr(constants, part.substring(res[0].length))\n    });\n});\nconst primitives = {\n    \"true\": true,\n    \"false\": false,\n    \"null\": null,\n    Infinity,\n    NaN,\n    \"und\": undefined\n};\nsetLispType(['number', 'boolean', 'null', 'und', 'NaN', 'Infinity'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, type === \"number\" ? (res[10] ? BigInt(res[1]) : Number(res[0])) : primitives[type === \"boolean\" ? res[0] : type]);\n});\nsetLispType(['string', 'literal', 'regex'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n        op: type,\n        b: parseInt(JSON.parse(res[1]), 10),\n    }));\n});\nsetLispType(['initialize'], (constants, type, part, res, expect, ctx) => {\n    if (!res[3]) {\n        ctx.lispTree = lispify(constants, part.substring(res[0].length), expectTypes[expect].next, new Lisp({\n            op: res[1],\n            a: res[2]\n        }));\n    }\n    else {\n        ctx.lispTree = new Lisp({\n            op: res[1],\n            a: res[2],\n            b: lispify(constants, part.substring(res[0].length), expectTypes[expect].next)\n        });\n    }\n});\nsetLispType(['function', 'inlineFunction', 'arrowFunction', 'arrowFunctionSingle'], (constants, type, part, res, expect, ctx) => {\n    const isArrow = type !== 'function' && type !== 'inlineFunction';\n    const isReturn = isArrow && !res[res.length - 1];\n    const argPos = isArrow ? 2 : 3;\n    const isAsync = !!res[1];\n    const args = res[argPos] ? res[argPos].replace(/\\s+/g, \"\").split(/,/g) : [];\n    if (!isArrow) {\n        args.unshift((res[2] || \"\").trimStart());\n    }\n    let ended = false;\n    args.forEach((arg) => {\n        if (ended)\n            throw new SyntaxError('Rest parameter must be last formal parameter');\n        if (arg.startsWith('...'))\n            ended = true;\n    });\n    args.unshift(isAsync);\n    const f = restOfExp(constants, part.substring(res[0].length), !isReturn ? [/^}/] : [/^[,\\)\\}\\]]/, semiColon]);\n    const func = (isReturn ? 'return ' + f : f);\n    ctx.lispTree = lispify(constants, part.substring(res[0].length + func.length + 1), expectTypes[expect].next, new Lisp({\n        op: isArrow ? 'arrowFunc' : type,\n        a: toLispArray(args),\n        b: constants.eager ? lispifyFunction(new CodeString(func), constants) : func\n    }));\n});\nconst iteratorRegex = /^((let|var|const)\\s+)?\\s*([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s+(in|of)(?![\\w\\$])/;\nsetLispType(['for', 'do', 'while'], (constants, type, part, res, expect, ctx) => {\n    let i = 0;\n    let startStep = true;\n    let startInternal = toLispArray([]);\n    let getIterator;\n    let beforeStep = false;\n    let checkFirst = true;\n    let condition;\n    let step = true;\n    let body;\n    switch (type) {\n        case 'while':\n            i = part.toString().indexOf(\"(\") + 1;\n            let extract = restOfExp(constants, part.substring(i), [], \"(\");\n            condition = lispifyReturnExpr(constants, extract);\n            body = restOfExp(constants, part.substring(i + extract.length + 1)).trim();\n            if (body[0] === \"{\")\n                body = body.slice(1, -1);\n            break;\n        case 'for':\n            i = part.toString().indexOf(\"(\") + 1;\n            let args = [];\n            let extract2 = emptyString;\n            for (let k = 0; k < 3; k++) {\n                extract2 = restOfExp(constants, part.substring(i), [/^[;\\)]/]);\n                args.push(extract2.trim());\n                i += extract2.length + 1;\n                if (part.char(i - 1) === \")\")\n                    break;\n            }\n            let iterator;\n            if (args.length === 1 && (iterator = iteratorRegex.exec(args[0].toString()))) {\n                if (iterator[4] === 'of') {\n                    getIterator = lispifyReturnExpr(constants, args[0].substring(iterator[0].length)),\n                        startInternal = toLispArray([\n                            ofStart2,\n                            ofStart3\n                        ]);\n                    condition = ofCondition;\n                    step = ofStep;\n                    beforeStep = lispify(constants, new CodeString((iterator[1] || 'let ') + iterator[3] + ' = $$next.value'), ['initialize']);\n                }\n                else {\n                    getIterator = lispifyReturnExpr(constants, args[0].substring(iterator[0].length)),\n                        startInternal = toLispArray([\n                            inStart2,\n                            inStart3\n                        ]);\n                    step = inStep;\n                    condition = inCondition;\n                    beforeStep = lispify(constants, new CodeString((iterator[1] || 'let ') + iterator[3] + ' = $$keys[$$keyIndex]'), ['initialize']);\n                }\n            }\n            else if (args.length === 3) {\n                startStep = lispifyExpr(constants, args.shift(), startingExecpted);\n                condition = lispifyReturnExpr(constants, args.shift());\n                step = lispifyExpr(constants, args.shift());\n            }\n            else {\n                throw new SyntaxError(\"Invalid for loop definition\");\n            }\n            body = restOfExp(constants, part.substring(i)).trim();\n            if (body[0] === \"{\")\n                body = body.slice(1, -1);\n            break;\n        case 'do':\n            checkFirst = false;\n            const isBlock = !!res[3];\n            body = restOfExp(constants, part.substring(res[0].length), isBlock ? [/^\\}/] : [semiColon]);\n            condition = lispifyReturnExpr(constants, restOfExp(constants, part.substring(part.toString().indexOf(\"(\", res[0].length + body.length) + 1), [], \"(\"));\n            break;\n    }\n    const a = toLispArray([checkFirst, startInternal, getIterator, startStep, step, condition, beforeStep]);\n    ctx.lispTree = new Lisp({\n        op: 'loop',\n        a,\n        b: lispifyBlock(body, constants)\n    });\n});\nsetLispType(['block'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = lispifyBlock(restOfExp(constants, part.substring(1), [], \"{\"), constants);\n});\nsetLispType(['loopAction'], (constants, type, part, res, expect, ctx) => {\n    ctx.lispTree = new Lisp({\n        op: 'loopAction',\n        a: res[1],\n    });\n});\nconst catchReg = /^\\s*(catch\\s*(\\(\\s*([a-zA-Z\\$_][a-zA-Z\\d\\$_]*)\\s*\\))?|finally)\\s*\\{/;\nsetLispType(['try'], (constants, type, part, res, expect, ctx) => {\n    const body = restOfExp(constants, part.substring(res[0].length), [], \"{\");\n    let catchRes = catchReg.exec(part.substring(res[0].length + body.length + 1).toString());\n    let finallyBody;\n    let exception;\n    let catchBody;\n    let offset = 0;\n    if (catchRes[1].startsWith('catch')) {\n        catchRes = catchReg.exec(part.substring(res[0].length + body.length + 1).toString());\n        exception = catchRes[2];\n        catchBody = restOfExp(constants, part.substring(res[0].length + body.length + 1 + catchRes[0].length), [], \"{\");\n        offset = res[0].length + body.length + 1 + catchRes[0].length + catchBody.length + 1;\n        if ((catchRes = catchReg.exec(part.substring(offset).toString())) && catchRes[1].startsWith('finally')) {\n            finallyBody = restOfExp(constants, part.substring(offset + catchRes[0].length), [], \"{\");\n        }\n    }\n    else {\n        finallyBody = restOfExp(constants, part.substring(res[0].length + body.length + 1 + catchRes[0].length), [], \"{\");\n    }\n    const b = toLispArray([\n        exception,\n        lispifyBlock(insertSemicolons(constants, catchBody || emptyString), constants),\n        lispifyBlock(insertSemicolons(constants, finallyBody || emptyString), constants),\n    ]);\n    ctx.lispTree = new Lisp({\n        op: 'try',\n        a: lispifyBlock(insertSemicolons(constants, body), constants),\n        b\n    });\n});\nsetLispType(['void', 'await'], (constants, type, part, res, expect, ctx) => {\n    const extract = restOfExp(constants, part.substring(res[0].length), [/^([^\\s\\.\\?\\w\\$]|\\?[^\\.])/]);\n    ctx.lispTree = lispify(constants, part.substring(res[0].length + extract.length), expectTypes[expect].next, new Lisp({\n        op: type,\n        a: lispify(constants, extract),\n    }));\n});\nsetLispType(['new'], (constants, type, part, res, expect, ctx) => {\n    let i = res[0].length;\n    const obj = restOfExp(constants, part.substring(i), [], undefined, \"(\");\n    i += obj.length + 1;\n    const args = [];\n    if (part.char(i - 1) === \"(\") {\n        const argsString = restOfExp(constants, part.substring(i), [], \"(\");\n        i += argsString.length + 1;\n        let found;\n        let j = 0;\n        while ((found = restOfExp(constants, argsString.substring(j), [/^,/])).length) {\n            j += found.length + 1;\n            args.push(found.trim());\n        }\n    }\n    ctx.lispTree = lispify(constants, part.substring(i), expectTypes.expEdge.next, new Lisp({\n        op: type,\n        a: lispify(constants, obj, expectTypes.initialize.next),\n        b: toLispArray(args.map((arg) => lispify(constants, arg, expectTypes.initialize.next))),\n    }));\n});\nconst ofStart2 = lispify(undefined, new CodeString('let $$iterator = $$obj[Symbol.iterator]()'), ['initialize']);\nconst ofStart3 = lispify(undefined, new CodeString('let $$next = $$iterator.next()'), ['initialize']);\nconst ofCondition = lispify(undefined, new CodeString('return !$$next.done'), ['initialize']);\nconst ofStep = lispify(undefined, new CodeString('$$next = $$iterator.next()'));\nconst inStart2 = lispify(undefined, new CodeString('let $$keys = Object.keys($$obj)'), ['initialize']);\nconst inStart3 = lispify(undefined, new CodeString('let $$keyIndex = 0'), ['initialize']);\nconst inStep = lispify(undefined, new CodeString('$$keyIndex++'));\nconst inCondition = lispify(undefined, new CodeString('return $$keyIndex < $$keys.length'), ['initialize']);\nvar lastType;\nfunction lispify(constants, part, expected, lispTree, topLevel = false) {\n    expected = expected || expectTypes.initialize.next;\n    if (part === undefined)\n        return lispTree;\n    part = part.trimStart();\n    const str = part.toString();\n    if (!part.length && !expected.includes('expEnd')) {\n        throw new SyntaxError(\"Unexpected end of expression\");\n    }\n    if (!part.length)\n        return lispTree;\n    let ctx = { lispTree: lispTree };\n    let res;\n    for (let expect of expected) {\n        if (expect === 'expEnd') {\n            continue;\n        }\n        for (let type in expectTypes[expect].types) {\n            if (type === 'expEnd') {\n                continue;\n            }\n            if (res = expectTypes[expect].types[type].exec(str)) {\n                lastType = type;\n                try {\n                    lispTypes.get(type)(constants, type, part, res, expect, ctx);\n                }\n                catch (e) {\n                    if (topLevel && e instanceof SyntaxError) {\n                        throw new ParseError(e.message, str);\n                    }\n                    throw e;\n                }\n                break;\n            }\n        }\n        if (res)\n            break;\n    }\n    if (!res && part.length) {\n        `Unexpected token after ${lastType}: ${part.char(0)}`;\n        if (topLevel) {\n            throw new ParseError(`Unexpected token after ${lastType}: ${part.char(0)}`, str);\n        }\n        throw new SyntaxError(`Unexpected token after ${lastType}: ${part.char(0)}`);\n    }\n    return ctx.lispTree;\n}\nconst startingExpectedWithoutSingle = startingExecpted.filter((r) => r !== 'expSingle');\nfunction lispifyExpr(constants, str, expected) {\n    if (!str.trimStart().length)\n        return undefined;\n    let subExpressions = [];\n    let sub;\n    let pos = 0;\n    expected = expected || expectTypes.initialize.next;\n    if (expected.includes('expSingle')) {\n        if (testMultiple(str.toString(), Object.values(expectTypes.expSingle.types))) {\n            return lispify(constants, str, ['expSingle'], undefined, true);\n        }\n    }\n    if (expected === startingExecpted)\n        expected = startingExpectedWithoutSingle;\n    while ((sub = restOfExp(constants, str.substring(pos), [/^,/])).length) {\n        subExpressions.push(sub.trimStart());\n        pos += sub.length + 1;\n    }\n    if (subExpressions.length === 1) {\n        return lispify(constants, str, expected, undefined, true);\n    }\n    if (expected.includes('initialize')) {\n        let defined = expectTypes.initialize.types.initialize.exec(subExpressions[0].toString());\n        if (defined) {\n            return toLispArray(subExpressions.map((str, i) => lispify(constants, i ? new CodeString(defined[1] + ' ' + str) : str, ['initialize'], undefined, true)));\n        }\n        else if (expectTypes.initialize.types.return.exec(subExpressions[0].toString())) {\n            return lispify(constants, str, expected, undefined, true);\n        }\n    }\n    const exprs = toLispArray(subExpressions.map((str, i) => lispify(constants, str, expected, undefined, true)));\n    return new Lisp({ op: \"multi\", a: exprs });\n}\nfunction lispifyReturnExpr(constants, str) {\n    return new Lisp({ op: 'return', b: lispifyExpr(constants, str) });\n}\nfunction lispifyBlock(str, constants, expression = false) {\n    str = insertSemicolons(constants, str);\n    if (!str.trim().length)\n        return toLispArray([]);\n    let parts = [];\n    let part;\n    let pos = 0;\n    let start = 0;\n    let details = {};\n    let skipped = false;\n    let isInserted = false;\n    while ((part = restOfExp(constants, str.substring(pos), [semiColon], undefined, undefined, undefined, details)).length) {\n        isInserted = str.char(pos + part.length) && str.char(pos + part.length) !== ';';\n        pos += part.length + (isInserted ? 0 : 1);\n        if (/^\\s*else(?![\\w\\$])/.test(str.substring(pos).toString())) {\n            skipped = true;\n        }\n        else if (details.words.includes('do') && /^\\s*while(?![\\w\\$])/.test(str.substring(pos).toString())) {\n            skipped = true;\n        }\n        else {\n            skipped = false;\n            parts.push(str.substring(start, pos - (isInserted ? 0 : 1)));\n            start = pos;\n        }\n        details = {};\n        if (expression)\n            break;\n    }\n    if (skipped) {\n        parts.push(str.substring(start, pos - (isInserted ? 0 : 1)));\n    }\n    return toLispArray(parts.map((str) => str.trimStart()).filter((str) => str.length).map((str, j) => {\n        return lispifyExpr(constants, str.trimStart(), startingExecpted);\n    }).flat());\n}\nfunction lispifyFunction(str, constants, expression = false) {\n    if (!str.trim().length)\n        return toLispArray([]);\n    const tree = lispifyBlock(str, constants, expression);\n    let hoisted = toLispArray([]);\n    hoist(tree, hoisted);\n    return toLispArray(hoisted.concat(tree));\n}\nfunction hoist(item, res) {\n    if (Array.isArray(item)) {\n        const rep = [];\n        for (let it of item) {\n            if (!hoist(it, res)) {\n                rep.push(it);\n            }\n        }\n        if (rep.length !== item.length) {\n            item.length = 0;\n            item.push(...rep);\n        }\n    }\n    else if (item instanceof Lisp) {\n        if (item.op === \"try\" || item.op === \"if\" || item.op === \"loop\" || item.op === \"switch\") {\n            hoist(item.a, res);\n            hoist(item.b, res);\n        }\n        else if (item.op === \"var\") {\n            res.push(new Lisp({ op: 'var', a: item.a }));\n        }\n        else if (item.op === \"function\" && item.a[1]) {\n            res.push(item);\n            return true;\n        }\n    }\n    return false;\n}\nconst closingsNoInsertion = /^(\\})\\s*(catch|finally|else|while|instanceof)(?![\\w\\$])/;\n//  \\w|)|] \\n \\w = 2                                  // \\} \\w|\\{ = 5 \nconst colonsRegex = /^((([\\w\\$\\]\\)\\\"\\'\\`]|\\+\\+|\\-\\-)\\s*\\r?\\n\\s*([\\w\\$\\+\\-\\!~]))|(\\}\\s*[\\w\\$\\!~\\+\\-\\{\\(\\\"\\'\\`]))/;\n// if () \\w \\n; \\w              == \\w \\n \\w    | last === if             a\n// if () { }; \\w                == \\} ^else    | last === if             b\n// if () \\w \\n; else \\n \\w \\n;  == \\w \\n \\w    | last === else           a\n// if () {} else {}; \\w         == \\} \\w       | last === else           b\n// while () \\n \\w \\n; \\w        == \\w \\n \\w    | last === while          a\n// while () { }; \\w             == \\} \\w       | last === while          b\n// do \\w \\n; while (); \\w       == \\w \\n while | last === do             a\n// do { } while (); \\w          == \\) \\w       | last === while          c\n// try {} catch () {}; \\w       == \\} \\w       | last === catch|finally  b\n// \\w \\n; \\w                    == \\w \\n \\w    | last === none           a\n// cb() \\n \\w                   == \\) \\n \\w    | last === none           a\n// obj[a] \\n \\w                 == \\] \\n \\w    | last === none           a\n// {} {}                        == \\} \\{       | last === none           b\nfunction insertSemicolons(constants, str) {\n    let rest = str;\n    let sub = emptyString;\n    let details = {};\n    const inserted = insertedSemicolons.get(str.ref) || new Array(str.ref.str.length);\n    while ((sub = restOfExp(constants, rest, [], undefined, undefined, [colonsRegex], details)).length) {\n        let valid = false;\n        let part = sub;\n        let edge = sub.length;\n        if (details.regRes) {\n            valid = true;\n            const [, , a, , , b] = details.regRes;\n            edge = details.regRes[3] === \"++\" || details.regRes[3] === \"--\" ? sub.length + 1 : sub.length;\n            part = rest.substring(0, edge);\n            if (b) {\n                let res = closingsNoInsertion.exec(rest.substring(sub.length - 1).toString());\n                if (res) {\n                    if (res[2] === 'while') {\n                        valid = details.lastWord !== 'do';\n                    }\n                    else {\n                        valid = false;\n                    }\n                }\n                else if (details.lastWord === 'function' && details.regRes[5][0] === \"}\" && details.regRes[5].slice(-1) === '(') {\n                    valid = false;\n                }\n            }\n            else if (a) {\n                if (details.lastWord === 'if' || details.lastWord === 'while' || details.lastWord === 'for' || details.lastWord === 'else') {\n                    valid = false;\n                }\n            }\n        }\n        if (valid) {\n            inserted[part.end] = true;\n        }\n        rest = rest.substring(edge);\n        details = {};\n    }\n    insertedSemicolons.set(str.ref, inserted);\n    return str;\n}\nfunction checkRegex(str) {\n    let i = 1;\n    let escape = false;\n    let done = false;\n    let cancel = false;\n    while (i < str.length && !done && !cancel) {\n        done = (str[i] === '/' && !escape);\n        escape = str[i] === '\\\\' && !escape;\n        cancel = str[i] === '\\n';\n        i++;\n    }\n    let after = str.substring(i);\n    cancel = (cancel || !done) || /^\\s*\\d/.test(after);\n    if (cancel)\n        return null;\n    let flags = /^[a-z]*/.exec(after);\n    if (/^\\s+[\\w\\$]/.test(str.substring(i + flags[0].length))) {\n        return null;\n    }\n    return {\n        regex: str.substring(1, i - 1),\n        flags: (flags && flags[0]) || \"\",\n        length: i + ((flags && flags[0].length) || 0)\n    };\n}\nconst notDivide = /(typeof|delete|instanceof|return|in|of|throw|new|void|do|if)$/;\nconst possibleDivide = /^([\\w\\$\\]\\)]|\\+\\+|\\-\\-)[\\s\\/]/;\nfunction extractConstants(constants, str, currentEnclosure = \"\") {\n    let quote;\n    let extract = [];\n    let escape = false;\n    let regexFound;\n    let comment = \"\";\n    let commentStart = -1;\n    let currJs = toLispArray([]);\n    let char = \"\";\n    const strRes = [];\n    const enclosures = [];\n    let isPossibleDivide;\n    for (var i = 0; i < str.length; i++) {\n        char = str[i];\n        if (comment) {\n            if (char === comment) {\n                if (comment === \"*\" && str[i + 1] === \"/\") {\n                    comment = \"\";\n                    i++;\n                }\n                else if (comment === \"\\n\") {\n                    comment = \"\";\n                }\n            }\n        }\n        else {\n            if (escape) {\n                escape = false;\n                extract.push(char);\n                continue;\n            }\n            if (quote) {\n                if (quote === \"`\" && char === \"$\" && str[i + 1] === \"{\") {\n                    let skip = extractConstants(constants, str.substring(i + 2), \"{\");\n                    currJs.push(skip.str);\n                    extract.push('${', currJs.length - 1, `}`);\n                    i += skip.length + 2;\n                }\n                else if (quote === char) {\n                    if (quote === '`') {\n                        constants.literals.push({\n                            op: 'literal',\n                            a: unraw(extract.join(\"\")),\n                            b: currJs\n                        });\n                        strRes.push(`\\``, constants.literals.length - 1, `\\``);\n                    }\n                    else {\n                        constants.strings.push(unraw(extract.join(\"\")));\n                        strRes.push(`\"`, constants.strings.length - 1, `\"`);\n                    }\n                    quote = null;\n                    extract = [];\n                }\n                else {\n                    extract.push(char);\n                }\n            }\n            else {\n                if ((char === \"'\" || char === '\"' || char === '`')) {\n                    currJs = toLispArray([]);\n                    quote = char;\n                }\n                else if (closings[currentEnclosure] === char && !enclosures.length) {\n                    return { str: strRes.join(\"\"), length: i };\n                }\n                else if (closings[char]) {\n                    enclosures.push(char);\n                    strRes.push(char);\n                }\n                else if (closings[enclosures[enclosures.length - 1]] === char) {\n                    enclosures.pop();\n                    strRes.push(char);\n                }\n                else if (char === \"/\" && (str[i + 1] === \"*\" || str[i + 1] === \"/\")) {\n                    comment = str[i + 1] === \"*\" ? \"*\" : \"\\n\";\n                    commentStart = i;\n                }\n                else if (char === '/' && !isPossibleDivide && (regexFound = checkRegex(str.substring(i)))) {\n                    constants.regexes.push(regexFound);\n                    strRes.push(`/`, constants.regexes.length - 1, `/r`);\n                    i += regexFound.length - 1;\n                }\n                else {\n                    strRes.push(char);\n                }\n                if (!isPossibleDivide || !space.test(char)) {\n                    if (isPossibleDivide = possibleDivide.exec(str.substring(i))) {\n                        if (notDivide.test(str.substring(0, i + isPossibleDivide[1].length))) {\n                            isPossibleDivide = null;\n                        }\n                    }\n                }\n            }\n            escape = quote && char === \"\\\\\";\n        }\n    }\n    if (comment) {\n        if (comment === \"*\") {\n            throw new SyntaxError(`Unclosed comment '/*': ${str.substring(commentStart)}`);\n        }\n    }\n    return { str: strRes.join(\"\"), length: i };\n}\nfunction parse(code, eager = false, expression = false) {\n    if (typeof code !== 'string')\n        throw new ParseError(`Cannot parse ${code}`, code);\n    let str = ' ' + code;\n    const constants = { strings: [], literals: [], regexes: [], eager };\n    str = extractConstants(constants, str).str;\n    for (let l of constants.literals) {\n        l.b = toLispArray(l.b.map((js) => lispifyExpr(constants, new CodeString(js))));\n    }\n    return { tree: lispifyFunction(new CodeString(str), constants, expression), constants };\n}\n\nclass ExecReturn {\n    constructor(auditReport, result, returned, breakLoop = false, continueLoop = false) {\n        this.auditReport = auditReport;\n        this.result = result;\n        this.returned = returned;\n        this.breakLoop = breakLoop;\n        this.continueLoop = continueLoop;\n    }\n}\nclass Prop {\n    constructor(context, prop, isConst = false, isGlobal = false, isVariable = false) {\n        this.context = context;\n        this.prop = prop;\n        this.isConst = isConst;\n        this.isGlobal = isGlobal;\n        this.isVariable = isVariable;\n    }\n    get(context) {\n        if (this.context === undefined)\n            throw new ReferenceError(`${this.prop} is not defined`);\n        context.getSubscriptions.forEach((cb) => cb(this.context, this.prop));\n        return this.context[this.prop];\n    }\n}\nconst optional = {};\nconst reservedWords = new Set([\n    'instanceof',\n    'typeof',\n    'return',\n    'try',\n    'catch',\n    'if',\n    'finally',\n    'else',\n    'in',\n    'of',\n    'var',\n    'let',\n    'const',\n    'for',\n    'delete',\n    'false',\n    'true',\n    'while',\n    'do',\n    'break',\n    'continue',\n    'new',\n    'function',\n    'async',\n    'await',\n    'switch',\n    'case'\n]);\nvar VarType;\n(function (VarType) {\n    VarType[\"let\"] = \"let\";\n    VarType[\"const\"] = \"const\";\n    VarType[\"var\"] = \"var\";\n})(VarType || (VarType = {}));\nfunction keysOnly(obj) {\n    const ret = Object.assign({}, obj);\n    for (let key in ret) {\n        ret[key] = true;\n    }\n    return ret;\n}\nclass Scope {\n    constructor(parent, vars = {}, functionThis) {\n        this.const = {};\n        this.let = {};\n        this.var = {};\n        const isFuncScope = functionThis !== undefined || parent === null;\n        this.parent = parent;\n        this.allVars = vars;\n        this.let = isFuncScope ? this.let : keysOnly(vars);\n        this.var = isFuncScope ? keysOnly(vars) : this.var;\n        this.globals = parent === null ? keysOnly(vars) : {};\n        this.functionThis = functionThis;\n    }\n    get(key, functionScope = false) {\n        if (key === 'this' && this.functionThis !== undefined) {\n            return new Prop({ this: this.functionThis }, key, true, false, true);\n        }\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        if (this.parent === null || !functionScope || this.functionThis !== undefined) {\n            if (this.globals.hasOwnProperty(key)) {\n                return new Prop(this.functionThis, key, false, true, true);\n            }\n            if (key in this.allVars && (!(key in {}) || this.allVars.hasOwnProperty(key))) {\n                return new Prop(this.allVars, key, this.const.hasOwnProperty(key), this.globals.hasOwnProperty(key), true);\n            }\n            if (this.parent === null) {\n                return new Prop(undefined, key);\n            }\n        }\n        return this.parent.get(key, functionScope);\n    }\n    set(key, val) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be assigned');\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        let prop = this.get(key);\n        if (prop.context === undefined) {\n            throw new ReferenceError(`Variable '${key}' was not declared.`);\n        }\n        if (prop.isConst) {\n            throw new TypeError(`Cannot assign to const variable '${key}'`);\n        }\n        if (prop.isGlobal) {\n            throw new SandboxError(`Cannot override global variable '${key}'`);\n        }\n        prop.context[prop.prop] = val;\n        return prop;\n    }\n    declare(key, type = null, value = undefined, isGlobal = false) {\n        if (key === 'this')\n            throw new SyntaxError('\"this\" cannot be declared');\n        if (reservedWords.has(key))\n            throw new SyntaxError(\"Unexepected token '\" + key + \"'\");\n        if (type === 'var' && this.functionThis === undefined && this.parent !== null) {\n            return this.parent.declare(key, type, value, isGlobal);\n        }\n        else if ((this[type].hasOwnProperty(key) && type !== 'const' && !this.globals.hasOwnProperty(key)) || !(key in this.allVars)) {\n            if (isGlobal) {\n                this.globals[key] = true;\n            }\n            this[type][key] = true;\n            this.allVars[key] = value;\n        }\n        else {\n            throw new SandboxError(`Identifier '${key}' has already been declared`);\n        }\n        return new Prop(this.allVars, key, this.const.hasOwnProperty(key), isGlobal);\n    }\n}\nclass FunctionScope {\n}\nclass LocalScope {\n}\nclass SandboxError extends Error {\n}\nlet currentTicks;\nfunction sandboxFunction(context, ticks) {\n    return SandboxFunction;\n    function SandboxFunction(...params) {\n        let code = params.pop() || \"\";\n        let parsed = parse(code);\n        return createFunction(params, parsed.tree, ticks || currentTicks, {\n            ...context,\n            constants: parsed.constants,\n            tree: parsed.tree\n        }, undefined, 'anonymous');\n    }\n}\nfunction generateArgs(argNames, args) {\n    const vars = {};\n    argNames.forEach((arg, i) => {\n        if (arg.startsWith('...')) {\n            vars[arg.substring(3)] = args.slice(i);\n        }\n        else {\n            vars[arg] = args[i];\n        }\n    });\n    return vars;\n}\nconst sandboxedFunctions = new WeakSet();\nfunction createFunction(argNames, parsed, ticks, context, scope, name) {\n    if (context.ctx.options.forbidFunctionCreation) {\n        throw new SandboxError(\"Function creation is forbidden\");\n    }\n    let func;\n    if (name === undefined) {\n        func = (...args) => {\n            const vars = generateArgs(argNames, args);\n            const res = executeTree(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars)]);\n            return res.result;\n        };\n    }\n    else {\n        func = function sandboxedObject(...args) {\n            const vars = generateArgs(argNames, args);\n            const res = executeTree(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars, this)]);\n            return res.result;\n        };\n    }\n    context.registerSandboxFunction(func);\n    sandboxedFunctions.add(func);\n    return func;\n}\nfunction createFunctionAsync(argNames, parsed, ticks, context, scope, name) {\n    var _a;\n    if (context.ctx.options.forbidFunctionCreation) {\n        throw new SandboxError(\"Function creation is forbidden\");\n    }\n    if (!((_a = context.ctx.prototypeWhitelist) === null || _a === void 0 ? void 0 : _a.has(Promise.prototype))) {\n        throw new SandboxError(\"Async/await not permitted\");\n    }\n    let func;\n    if (name === undefined) {\n        func = async (...args) => {\n            const vars = generateArgs(argNames, args);\n            const res = await executeTreeAsync(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars)]);\n            return res.result;\n        };\n    }\n    else {\n        func = async function sandboxedObject(...args) {\n            const vars = generateArgs(argNames, args);\n            const res = await executeTreeAsync(ticks, context, parsed, scope === undefined ? [] : [new Scope(scope, vars, this)]);\n            return res.result;\n        };\n    }\n    context.registerSandboxFunction(func);\n    sandboxedFunctions.add(func);\n    return func;\n}\nfunction sandboxedEval(func) {\n    return sandboxEval;\n    function sandboxEval(code) {\n        return func(code)();\n    }\n}\nfunction sandboxedSetTimeout(func) {\n    return function sandboxSetTimeout(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setTimeout(handler, ...args);\n        return setTimeout(func(handler), ...args);\n    };\n}\nfunction sandboxedSetInterval(func) {\n    return function sandboxSetInterval(handler, ...args) {\n        if (typeof handler !== 'string')\n            return setInterval(handler, ...args);\n        return setInterval(func(handler), ...args);\n    };\n}\nfunction assignCheck(obj, context, op = 'assign') {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    if (obj.context === undefined) {\n        throw new ReferenceError(`Cannot ${op} value to undefined.`);\n    }\n    if (typeof obj.context !== 'object' && typeof obj.context !== 'function') {\n        throw new SyntaxError(`Cannot ${op} value to a primitive.`);\n    }\n    if (obj.isConst) {\n        throw new TypeError(`Cannot set value to const variable '${obj.prop}'`);\n    }\n    if (obj.isGlobal) {\n        throw new SandboxError(`Cannot ${op} property '${obj.prop}' of a global object`);\n    }\n    if (typeof obj.context[obj.prop] === 'function' && !obj.context.hasOwnProperty(obj.prop)) {\n        throw new SandboxError(`Override prototype property '${obj.prop}' not allowed`);\n    }\n    if (op === \"delete\") {\n        if (obj.context.hasOwnProperty(obj.prop)) {\n            (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb({ type: \"delete\", prop: obj.prop }));\n            (_b = context.changeSubscriptionsGlobal.get(obj.context)) === null || _b === void 0 ? void 0 : _b.forEach((cb) => cb({ type: \"delete\", prop: obj.prop }));\n        }\n    }\n    else if (obj.context.hasOwnProperty(obj.prop)) {\n        (_d = (_c = context.setSubscriptions.get(obj.context)) === null || _c === void 0 ? void 0 : _c.get(obj.prop)) === null || _d === void 0 ? void 0 : _d.forEach((cb) => cb({\n            type: \"replace\"\n        }));\n        (_f = (_e = context.setSubscriptionsGlobal.get(obj.context)) === null || _e === void 0 ? void 0 : _e.get(obj.prop)) === null || _f === void 0 ? void 0 : _f.forEach((cb) => cb({\n            type: \"replace\"\n        }));\n    }\n    else {\n        (_g = context.changeSubscriptions.get(obj.context)) === null || _g === void 0 ? void 0 : _g.forEach((cb) => cb({ type: \"create\", prop: obj.prop }));\n        (_h = context.changeSubscriptionsGlobal.get(obj.context)) === null || _h === void 0 ? void 0 : _h.forEach((cb) => cb({ type: \"create\", prop: obj.prop }));\n    }\n}\nconst arrayChange = new Set([\n    [].push,\n    [].pop,\n    [].shift,\n    [].unshift,\n    [].splice,\n    [].reverse,\n    [].sort,\n    [].copyWithin\n]);\nconst literalRegex = /(\\$\\$)*(\\$)?\\${(\\d+)}/g;\nlet ops2 = {\n    'prop': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (a === null) {\n            throw new TypeError(`Cannot get property ${b} of null`);\n        }\n        const type = typeof a;\n        if (type === 'undefined' && obj === undefined) {\n            let prop = scope.get(b);\n            if (prop.context === context.ctx.sandboxGlobal) {\n                if (context.ctx.options.audit) {\n                    context.ctx.auditReport.globalsAccess.add(b);\n                }\n                const rep = context.ctx.globalsWhitelist.has(context.ctx.sandboxGlobal[b]) ? context.evals.get(context.ctx.sandboxGlobal[b]) : undefined;\n                if (rep) {\n                    done(undefined, rep);\n                    return;\n                }\n            }\n            if (prop.context && prop.context[b] === globalThis) {\n                done(undefined, context.ctx.globalScope.get('this'));\n                return;\n            }\n            done(undefined, prop);\n            return;\n        }\n        else if (a === undefined) {\n            throw new SandboxError(\"Cannot get property '\" + b + \"' of undefined\");\n        }\n        if (type !== 'object') {\n            if (type === 'number') {\n                a = new Number(a);\n            }\n            else if (type === 'string') {\n                a = new String(a);\n            }\n            else if (type === 'boolean') {\n                a = new Boolean(a);\n            }\n        }\n        else if (typeof a.hasOwnProperty === 'undefined') {\n            done(undefined, new Prop(undefined, b));\n            return;\n        }\n        const isFunction = type === 'function';\n        let prototypeAccess = isFunction || !(a.hasOwnProperty(b) || typeof b === 'number');\n        if (context.ctx.options.audit && prototypeAccess) {\n            if (typeof b === 'string') {\n                let prot = Object.getPrototypeOf(a);\n                do {\n                    if (prot.hasOwnProperty(b)) {\n                        if (!context.ctx.auditReport.prototypeAccess[prot.constructor.name]) {\n                            context.ctx.auditReport.prototypeAccess[prot.constructor.name] = new Set();\n                        }\n                        context.ctx.auditReport.prototypeAccess[prot.constructor.name].add(b);\n                    }\n                } while (prot = Object.getPrototypeOf(prot));\n            }\n        }\n        if (prototypeAccess) {\n            if (isFunction) {\n                if (!['name', 'length', 'constructor'].includes(b) && a.hasOwnProperty(b)) {\n                    const whitelist = context.ctx.prototypeWhitelist.get(a.prototype);\n                    const replace = context.ctx.options.prototypeReplacements.get(a);\n                    if (replace) {\n                        done(undefined, new Prop(replace(a, true), b));\n                        return;\n                    }\n                    if (whitelist && (!whitelist.size || whitelist.has(b))) ;\n                    else {\n                        throw new SandboxError(`Static method or property access not permitted: ${a.name}.${b}`);\n                    }\n                }\n            }\n            else if (b !== 'constructor') {\n                let prot = a;\n                while (prot = Object.getPrototypeOf(prot)) {\n                    if (prot.hasOwnProperty(b)) {\n                        const whitelist = context.ctx.prototypeWhitelist.get(prot);\n                        const replace = context.ctx.options.prototypeReplacements.get(prot.constuctor);\n                        if (replace) {\n                            done(undefined, new Prop(replace(a, false), b));\n                            return;\n                        }\n                        if (whitelist && (!whitelist.size || whitelist.has(b))) {\n                            break;\n                        }\n                        throw new SandboxError(`Method or property access not permitted: ${prot.constructor.name}.${b}`);\n                    }\n                }\n            }\n        }\n        if (context.evals.has(a[b])) {\n            done(undefined, context.evals.get(a[b]));\n            return;\n        }\n        if (a[b] === globalThis) {\n            done(undefined, context.ctx.globalScope.get('this'));\n            return;\n        }\n        let g = obj.isGlobal || (isFunction && !sandboxedFunctions.has(a)) || context.ctx.globalsWhitelist.has(a);\n        done(undefined, new Prop(a, b, false, g));\n    },\n    'call': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (context.ctx.options.forbidFunctionCalls)\n            throw new SandboxError(\"Function invocations are not allowed\");\n        if (typeof a !== 'function') {\n            throw new TypeError(`${obj.prop} is not a function`);\n        }\n        const args = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        execMany(ticks, exec, toLispArray(args), (err, vals) => {\n            var _a, _b;\n            if (err) {\n                done(err);\n                return;\n            }\n            if (typeof obj === 'function') {\n                done(undefined, obj(...vals));\n                return;\n            }\n            if (obj.context[obj.prop] === JSON.stringify && context.getSubscriptions.size) {\n                const cache = new Set();\n                const recurse = (x) => {\n                    if (!x || !(typeof x === 'object') || cache.has(x))\n                        return;\n                    cache.add(x);\n                    for (let y in x) {\n                        context.getSubscriptions.forEach((cb) => cb(x, y));\n                        recurse(x[y]);\n                    }\n                };\n                recurse(vals[0]);\n            }\n            if (obj.context instanceof Array && arrayChange.has(obj.context[obj.prop]) && (context.changeSubscriptions.get(obj.context) || context.changeSubscriptionsGlobal.get(obj.context))) {\n                let change;\n                let changed = false;\n                if (obj.prop === \"push\") {\n                    change = {\n                        type: \"push\",\n                        added: vals\n                    };\n                    changed = !!vals.length;\n                }\n                else if (obj.prop === \"pop\") {\n                    change = {\n                        type: \"pop\",\n                        removed: obj.context.slice(-1)\n                    };\n                    changed = !!change.removed.length;\n                }\n                else if (obj.prop === \"shift\") {\n                    change = {\n                        type: \"shift\",\n                        removed: obj.context.slice(0, 1)\n                    };\n                    changed = !!change.removed.length;\n                }\n                else if (obj.prop === \"unshift\") {\n                    change = {\n                        type: \"unshift\",\n                        added: vals\n                    };\n                    changed = !!vals.length;\n                }\n                else if (obj.prop === \"splice\") {\n                    change = {\n                        type: \"splice\",\n                        startIndex: vals[0],\n                        deleteCount: vals[1] === undefined ? obj.context.length : vals[1],\n                        added: vals.slice(2),\n                        removed: obj.context.slice(vals[0], vals[1] === undefined ? undefined : vals[0] + vals[1])\n                    };\n                    changed = !!change.added.length || !!change.removed.length;\n                }\n                else if (obj.prop === \"reverse\" || obj.prop === \"sort\") {\n                    change = { type: obj.prop };\n                    changed = !!obj.context.length;\n                }\n                else if (obj.prop === \"copyWithin\") {\n                    let len = vals[2] === undefined ? obj.context.length - vals[1] : Math.min(obj.context.length, vals[2] - vals[1]);\n                    change = {\n                        type: \"copyWithin\",\n                        startIndex: vals[0],\n                        endIndex: vals[0] + len,\n                        added: obj.context.slice(vals[1], vals[1] + len),\n                        removed: obj.context.slice(vals[0], vals[0] + len)\n                    };\n                    changed = !!change.added.length || !!change.removed.length;\n                }\n                if (changed) {\n                    (_a = context.changeSubscriptions.get(obj.context)) === null || _a === void 0 ? void 0 : _a.forEach((cb) => cb(change));\n                    (_b = context.changeSubscriptionsGlobal.get(obj.context)) === null || _b === void 0 ? void 0 : _b.forEach((cb) => cb(change));\n                }\n            }\n            obj.get(context);\n            done(undefined, obj.context[obj.prop](...vals));\n        }, scope, context);\n    },\n    'createObject': (exec, done, ticks, a, b, obj, context, scope) => {\n        let res = {};\n        for (let item of b) {\n            if (item instanceof SpreadObject) {\n                res = { ...res, ...item.item };\n            }\n            else {\n                res[item.key] = item.val;\n            }\n        }\n        done(undefined, res);\n    },\n    'keyVal': (exec, done, ticks, a, b) => done(undefined, new KeyVal(a, b)),\n    'createArray': (exec, done, ticks, a, b, obj, context, scope) => {\n        const items = b.map((item) => {\n            if (item instanceof SpreadArray) {\n                return [...item.item];\n            }\n            else {\n                return [item];\n            }\n        }).flat();\n        execMany(ticks, exec, toLispArray(items), done, scope, context);\n    },\n    'group': (exec, done, ticks, a, b) => done(undefined, b),\n    'string': (exec, done, ticks, a, b, obj, context) => done(undefined, context.constants.strings[b]),\n    'regex': (exec, done, ticks, a, b, obj, context) => {\n        const reg = context.constants.regexes[b];\n        if (!context.ctx.globalsWhitelist.has(RegExp)) {\n            throw new SandboxError(\"Regex not permitted\");\n        }\n        else {\n            done(undefined, new RegExp(reg.regex, reg.flags));\n        }\n    },\n    'literal': (exec, done, ticks, a, b, obj, context, scope) => {\n        let name = context.constants.literals[b].a;\n        let found = toLispArray([]);\n        let f;\n        let resnums = [];\n        while (f = literalRegex.exec(name)) {\n            if (!f[2]) {\n                found.push(context.constants.literals[b].b[parseInt(f[3], 10)]);\n                resnums.push(f[3]);\n            }\n        }\n        execMany(ticks, exec, found, (err, processed) => {\n            const reses = {};\n            if (err) {\n                done(err);\n                return;\n            }\n            for (let i in resnums) {\n                const num = resnums[i];\n                reses[num] = processed[i];\n            }\n            done(undefined, name.replace(/(\\\\\\\\)*(\\\\)?\\${(\\d+)}/g, (match, $$, $, num) => {\n                if ($)\n                    return match;\n                let res = reses[num];\n                return ($$ ? $$ : '') + `${valueOrProp(res, context)}`;\n            }));\n        }, scope, context);\n    },\n    'spreadArray': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, new SpreadArray(res));\n        });\n    },\n    'spreadObject': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, new SpreadObject(res));\n        });\n    },\n    '!': (exec, done, ticks, a, b) => done(undefined, !b),\n    '~': (exec, done, ticks, a, b) => done(undefined, ~b),\n    '++$': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, ++obj.context[obj.prop]);\n    },\n    '$++': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop]++);\n    },\n    '--$': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, --obj.context[obj.prop]);\n    },\n    '$--': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop]--);\n    },\n    '=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] = b);\n    },\n    '+=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] += b);\n    },\n    '-=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] -= b);\n    },\n    '/=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] /= b);\n    },\n    '*=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] *= b);\n    },\n    '**=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] **= b);\n    },\n    '%=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] %= b);\n    },\n    '^=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] ^= b);\n    },\n    '&=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] &= b);\n    },\n    '|=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] |= b);\n    },\n    '<<=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] <<= b);\n    },\n    '>>=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] >>= b);\n    },\n    '>>>=': (exec, done, ticks, a, b, obj, context) => {\n        assignCheck(obj, context);\n        done(undefined, obj.context[obj.prop] >>= b);\n    },\n    '?': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid inline if');\n        }\n        exec(ticks, a, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n            }\n            else {\n                exec(ticks, valueOrProp(res, context) ? b.t : b.f, scope, context, done);\n            }\n        });\n    },\n    '>': (exec, done, ticks, a, b) => done(undefined, a > b),\n    '<': (exec, done, ticks, a, b) => done(undefined, a < b),\n    '>=': (exec, done, ticks, a, b) => done(undefined, a >= b),\n    '<=': (exec, done, ticks, a, b) => done(undefined, a <= b),\n    '==': (exec, done, ticks, a, b) => done(undefined, a == b),\n    '===': (exec, done, ticks, a, b) => done(undefined, a === b),\n    '!=': (exec, done, ticks, a, b) => done(undefined, a != b),\n    '!==': (exec, done, ticks, a, b) => done(undefined, a !== b),\n    '&&': (exec, done, ticks, a, b) => done(undefined, a && b),\n    '||': (exec, done, ticks, a, b) => done(undefined, a || b),\n    '&': (exec, done, ticks, a, b) => done(undefined, a & b),\n    '|': (exec, done, ticks, a, b) => done(undefined, a | b),\n    ':': (exec, done, ticks, a, b) => done(undefined, new If(a, b)),\n    '+': (exec, done, ticks, a, b) => done(undefined, a + b),\n    '-': (exec, done, ticks, a, b) => done(undefined, a - b),\n    '$+': (exec, done, ticks, a, b) => done(undefined, +b),\n    '$-': (exec, done, ticks, a, b) => done(undefined, -b),\n    '/': (exec, done, ticks, a, b) => done(undefined, a / b),\n    '^': (exec, done, ticks, a, b) => done(undefined, a ^ b),\n    '*': (exec, done, ticks, a, b) => done(undefined, a * b),\n    '%': (exec, done, ticks, a, b) => done(undefined, a % b),\n    '<<': (exec, done, ticks, a, b) => done(undefined, a << b),\n    '>>': (exec, done, ticks, a, b) => done(undefined, a >> b),\n    '>>>': (exec, done, ticks, a, b) => done(undefined, a >>> b),\n    'typeof': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, b, scope, context, (e, prop) => {\n            done(undefined, typeof valueOrProp(prop, context));\n        });\n    },\n    'instanceof': (exec, done, ticks, a, b) => done(undefined, a instanceof b),\n    'in': (exec, done, ticks, a, b) => done(undefined, a in b),\n    'delete': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        if (bobj.context === undefined) {\n            done(undefined, true);\n            return;\n        }\n        assignCheck(bobj, context, 'delete');\n        if (bobj.isVariable) {\n            done(undefined, false);\n            return;\n        }\n        done(undefined, delete bobj.context[bobj.prop]);\n    },\n    'return': (exec, done, ticks, a, b, obj, context) => done(undefined, b),\n    'var': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.var, res));\n        });\n    },\n    'let': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.let, res, bobj && bobj.isGlobal));\n        });\n    },\n    'const': (exec, done, ticks, a, b, obj, context, scope, bobj) => {\n        exec(ticks, b, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            done(undefined, scope.declare(a, VarType.const, res));\n        });\n    },\n    'arrowFunc': (exec, done, ticks, a, b, obj, context, scope) => {\n        a = [...a];\n        if (typeof obj.b === \"string\" || obj.b instanceof CodeString) {\n            obj.b = b = lispifyFunction(new CodeString(obj.b), context.constants);\n        }\n        if (a.shift()) {\n            done(undefined, createFunctionAsync(a, b, ticks, context, scope));\n        }\n        else {\n            done(undefined, createFunction(a, b, ticks, context, scope));\n        }\n    },\n    'function': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (typeof obj.b === \"string\" || obj.b instanceof CodeString) {\n            obj.b = b = lispifyFunction(new CodeString(obj.b), context.constants);\n        }\n        let isAsync = a.shift();\n        let name = a.shift();\n        let func;\n        if (isAsync) {\n            func = createFunctionAsync(a, b, ticks, context, scope, name);\n        }\n        else {\n            func = createFunction(a, b, ticks, context, scope, name);\n        }\n        if (name) {\n            scope.declare(name, VarType.var, func);\n        }\n        done(undefined, func);\n    },\n    'inlineFunction': (exec, done, ticks, a, b, obj, context, scope) => {\n        if (typeof obj.b === \"string\" || obj.b instanceof CodeString) {\n            obj.b = b = lispifyFunction(new CodeString(obj.b), context.constants);\n        }\n        let isAsync = a.shift();\n        let name = a.shift();\n        if (name) {\n            scope = new Scope(scope, {});\n        }\n        let func;\n        if (isAsync) {\n            func = createFunctionAsync(a, b, ticks, context, scope, name);\n        }\n        else {\n            func = createFunction(a, b, ticks, context, scope, name);\n        }\n        if (name) {\n            scope.declare(name, VarType.let, func);\n        }\n        done(undefined, func);\n    },\n    'loop': (exec, done, ticks, a, b, obj, context, scope) => {\n        const [checkFirst, startInternal, getIterator, startStep, step, condition, beforeStep] = a;\n        let loop = true;\n        const loopScope = new Scope(scope, {});\n        let internalVars = {\n            '$$obj': undefined\n        };\n        const interalScope = new Scope(loopScope, internalVars);\n        if (exec === execAsync) {\n            (async () => {\n                let ad;\n                ad = asyncDone((d) => exec(ticks, startStep, loopScope, context, d));\n                internalVars['$$obj'] = (ad = asyncDone((d) => exec(ticks, getIterator, loopScope, context, d))).isInstant === true ? ad.instant : (await ad.p).result;\n                ad = asyncDone((d) => exec(ticks, startInternal, interalScope, context, d));\n                if (checkFirst)\n                    loop = (ad = asyncDone((d) => exec(ticks, condition, interalScope, context, d))).isInstant === true ? ad.instant : (await ad.p).result;\n                while (loop) {\n                    let innerLoopVars = {};\n                    ad = asyncDone((d) => exec(ticks, beforeStep, new Scope(interalScope, innerLoopVars), context, d));\n                    ad.isInstant === true ? ad.instant : (await ad.p).result;\n                    let res = await executeTreeAsync(ticks, context, b, [new Scope(loopScope, innerLoopVars)], \"loop\");\n                    if (res instanceof ExecReturn && res.returned) {\n                        done(undefined, res);\n                        return;\n                    }\n                    if (res instanceof ExecReturn && res.breakLoop) {\n                        break;\n                    }\n                    ad = asyncDone((d) => exec(ticks, step, interalScope, context, d));\n                    loop = (ad = asyncDone((d) => exec(ticks, condition, interalScope, context, d))).isInstant === true ? ad.instant : (await ad.p).result;\n                }\n                done();\n            })().catch(done);\n        }\n        else {\n            syncDone((d) => exec(ticks, startStep, loopScope, context, d));\n            internalVars['$$obj'] = syncDone((d) => exec(ticks, getIterator, loopScope, context, d)).result;\n            syncDone((d) => exec(ticks, startInternal, interalScope, context, d));\n            if (checkFirst)\n                loop = (syncDone((d) => exec(ticks, condition, interalScope, context, d))).result;\n            while (loop) {\n                let innerLoopVars = {};\n                syncDone((d) => exec(ticks, beforeStep, new Scope(interalScope, innerLoopVars), context, d));\n                let res = executeTree(ticks, context, b, [new Scope(loopScope, innerLoopVars)], \"loop\");\n                if (res instanceof ExecReturn && res.returned) {\n                    done(undefined, res);\n                    return;\n                }\n                if (res instanceof ExecReturn && res.breakLoop) {\n                    break;\n                }\n                syncDone((d) => exec(ticks, step, interalScope, context, d));\n                loop = (syncDone((d) => exec(ticks, condition, interalScope, context, d))).result;\n            }\n            done();\n        }\n    },\n    'loopAction': (exec, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch) => {\n        if ((inLoopOrSwitch === \"switch\" && a === \"continue\") || !inLoopOrSwitch) {\n            throw new SandboxError(\"Illegal \" + a + \" statement\");\n        }\n        done(undefined, new ExecReturn(context.ctx.auditReport, undefined, false, a === \"break\", a === \"continue\"));\n    },\n    'if': (exec, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch) => {\n        if (!(b instanceof If)) {\n            throw new SyntaxError('Invalid if');\n        }\n        exec(ticks, a, scope, context, (err, res) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            executeTreeWithDone(exec, done, ticks, context, valueOrProp(res, context) ? b.t : b.f, [new Scope(scope)], inLoopOrSwitch);\n        });\n    },\n    'switch': (exec, done, ticks, a, b, obj, context, scope) => {\n        exec(ticks, a, scope, context, (err, toTest) => {\n            if (err) {\n                done(err);\n                return;\n            }\n            toTest = valueOrProp(toTest, context);\n            if (exec === execSync) {\n                let res;\n                let isTrue = false;\n                for (let caseItem of b) {\n                    if (isTrue || (isTrue = !caseItem.a || toTest === valueOrProp((syncDone((d) => exec(ticks, caseItem.a, scope, context, d))).result, context))) {\n                        if (!caseItem.b)\n                            continue;\n                        res = executeTree(ticks, context, caseItem.b, [scope], \"switch\");\n                        if (res.breakLoop)\n                            break;\n                        if (res.returned) {\n                            done(undefined, res);\n                            return;\n                        }\n                        if (!caseItem.a) { // default case\n                            break;\n                        }\n                    }\n                }\n                done();\n            }\n            else {\n                (async () => {\n                    let res;\n                    let isTrue = false;\n                    for (let caseItem of b) {\n                        let ad;\n                        if (isTrue || (isTrue = !caseItem.a || toTest === valueOrProp((ad = asyncDone((d) => exec(ticks, caseItem.a, scope, context, d))).isInstant === true ? ad.instant : (await ad.p).result, context))) {\n                            if (!caseItem.b)\n                                continue;\n                            res = await executeTreeAsync(ticks, context, caseItem.b, [scope], \"switch\");\n                            if (res.breakLoop)\n                                break;\n                            if (res.returned) {\n                                done(undefined, res);\n                                return;\n                            }\n                            if (!caseItem.a) { // default case\n                                break;\n                            }\n                        }\n                    }\n                    done();\n                })().catch(done);\n            }\n        });\n    },\n    'try': (exec, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch) => {\n        const [exception, catchBody, finallyBody] = b;\n        executeTreeWithDone(exec, (err, res) => {\n            executeTreeWithDone(exec, (e) => {\n                if (e)\n                    done(e);\n                else if (err) {\n                    let sc = {};\n                    if (exception)\n                        sc[exception] = err;\n                    executeTreeWithDone(exec, done, ticks, context, catchBody, [new Scope(scope)], inLoopOrSwitch);\n                }\n                else {\n                    done(undefined, res);\n                }\n            }, ticks, context, finallyBody, [new Scope(scope, {})]);\n        }, ticks, context, a, [new Scope(scope)], inLoopOrSwitch);\n    },\n    'void': (exec, done, ticks, a) => { done(); },\n    'new': (exec, done, ticks, a, b, obj, context) => {\n        if (!context.ctx.globalsWhitelist.has(a) && !sandboxedFunctions.has(a)) {\n            throw new SandboxError(`Object construction not allowed: ${a.constructor.name}`);\n        }\n        done(undefined, new a(...b));\n    },\n    'throw': (exec, done, ticks, a, b) => { done(b); },\n    'multi': (exec, done, ticks, a) => done(undefined, a.pop())\n};\nlet ops = new Map();\nfor (let op in ops2) {\n    ops.set(op, ops2[op]);\n}\nfunction valueOrProp(a, context) {\n    if (a instanceof Prop)\n        return a.get(context);\n    if (a === optional)\n        return undefined;\n    return a;\n}\nfunction execMany(ticks, exec, tree, done, scope, context, inLoopOrSwitch) {\n    if (exec === execSync) {\n        _execManySync(ticks, tree, done, scope, context, inLoopOrSwitch);\n    }\n    else {\n        _execManyAsync(ticks, tree, done, scope, context, inLoopOrSwitch).catch(done);\n    }\n}\nfunction _execManySync(ticks, tree, done, scope, context, inLoopOrSwitch) {\n    let ret = [];\n    for (let i = 0; i < tree.length; i++) {\n        let res;\n        try {\n            res = syncDone((d) => execSync(ticks, tree[i], scope, context, d, inLoopOrSwitch)).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (res instanceof ExecReturn && (res.returned || res.breakLoop || res.continueLoop)) {\n            done(undefined, res);\n            return;\n        }\n        ret.push(res);\n    }\n    done(undefined, ret);\n}\nasync function _execManyAsync(ticks, tree, done, scope, context, inLoopOrSwitch) {\n    let ret = [];\n    for (let i = 0; i < tree.length; i++) {\n        let res;\n        try {\n            let ad;\n            res = (ad = asyncDone((d) => execAsync(ticks, tree[i], scope, context, d, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (res instanceof ExecReturn && (res.returned || res.breakLoop || res.continueLoop)) {\n            done(undefined, res);\n            return;\n        }\n        ret.push(res);\n    }\n    done(undefined, ret);\n}\nfunction asyncDone(callback) {\n    let isInstant = false;\n    let instant;\n    const p = new Promise((resolve, reject) => {\n        callback((err, result) => {\n            if (err)\n                reject(err);\n            else {\n                isInstant = true;\n                instant = result;\n                resolve({ result });\n            }\n        });\n    });\n    return {\n        isInstant,\n        instant,\n        p\n    };\n}\nfunction syncDone(callback) {\n    let result;\n    let err;\n    callback((e, r) => {\n        err = e;\n        result = r;\n    });\n    if (err)\n        throw err;\n    return { result };\n}\nasync function execAsync(ticks, tree, scope, context, doneOriginal, inLoopOrSwitch) {\n    let done = doneOriginal;\n    const p = new Promise((resolve) => {\n        done = (e, r) => {\n            doneOriginal(e, r);\n            resolve();\n        };\n    });\n    if (_execNoneRecurse(ticks, tree, scope, context, done, true, inLoopOrSwitch)) ;\n    else if (tree instanceof Lisp) {\n        let obj;\n        try {\n            let ad;\n            obj = (ad = asyncDone((d) => execAsync(ticks, tree.a, scope, context, d, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let a = obj;\n        try {\n            a = obj instanceof Prop ? obj.get(context) : obj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let op = tree.op;\n        if (op === '?prop' || op === '?call') {\n            if (a === undefined || a === null) {\n                done(undefined, optional);\n                return;\n            }\n            op = op.slice(1);\n        }\n        if (a === optional) {\n            if (op === 'prop' || op === 'call') {\n                done(undefined, a);\n                return;\n            }\n            else {\n                a = undefined;\n            }\n        }\n        let bobj;\n        try {\n            let ad;\n            bobj = (ad = asyncDone((d) => execAsync(ticks, tree.b, scope, context, d, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let b = bobj;\n        try {\n            b = bobj instanceof Prop ? bobj.get(context) : bobj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (b === optional) {\n            b = undefined;\n        }\n        if (ops.has(op)) {\n            try {\n                ops.get(op)(execAsync, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch);\n            }\n            catch (err) {\n                done(err);\n            }\n        }\n        else {\n            done(new SyntaxError('Unknown operator: ' + op));\n        }\n    }\n    await p;\n}\nfunction execSync(ticks, tree, scope, context, done, inLoopOrSwitch) {\n    if (_execNoneRecurse(ticks, tree, scope, context, done, false, inLoopOrSwitch)) ;\n    else if (tree instanceof Lisp) {\n        let obj;\n        try {\n            obj = syncDone((d) => execSync(ticks, tree.a, scope, context, d, inLoopOrSwitch)).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let a = obj;\n        try {\n            a = obj instanceof Prop ? obj.get(context) : obj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let op = tree.op;\n        if (op === '?prop' || op === '?call') {\n            if (a === undefined || a === null) {\n                done(undefined, optional);\n                return;\n            }\n            op = op.slice(1);\n        }\n        if (a === optional) {\n            if (op === 'prop' || op === 'call') {\n                done(undefined, a);\n                return;\n            }\n            else {\n                a = undefined;\n            }\n        }\n        let bobj;\n        try {\n            bobj = syncDone((d) => execSync(ticks, tree.b, scope, context, d, inLoopOrSwitch)).result;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        let b = bobj;\n        try {\n            b = bobj instanceof Prop ? bobj.get(context) : bobj;\n        }\n        catch (e) {\n            done(e);\n            return;\n        }\n        if (b === optional) {\n            b = undefined;\n        }\n        if (ops.has(op)) {\n            try {\n                ops.get(op)(execSync, done, ticks, a, b, obj, context, scope, bobj, inLoopOrSwitch);\n            }\n            catch (err) {\n                done(err);\n            }\n        }\n        else {\n            done(new SyntaxError('Unknown operator: ' + op));\n        }\n    }\n}\nconst unexecTypes = new Set(['arrowFunc', 'function', 'inlineFunction', 'loop', 'try', 'switch', 'if', '?', 'typeof']);\nfunction _execNoneRecurse(ticks, tree, scope, context, done, isAsync, inLoopOrSwitch) {\n    var _a;\n    const exec = isAsync ? execAsync : execSync;\n    if (context.ctx.options.executionQuota <= ticks.ticks) {\n        if (typeof context.ctx.options.onExecutionQuotaReached === 'function' && context.ctx.options.onExecutionQuotaReached(ticks, scope, context, tree)) ;\n        else {\n            done(new SandboxError(\"Execution quota exceeded\"));\n            return;\n        }\n    }\n    ticks.ticks++;\n    currentTicks = ticks;\n    if (tree instanceof Prop) {\n        try {\n            done(undefined, tree.get(context));\n        }\n        catch (err) {\n            done(err);\n        }\n    }\n    else if (tree === optional) {\n        done();\n    }\n    else if (Array.isArray(tree) && tree.lisp === lispArrayKey) {\n        execMany(ticks, exec, tree, done, scope, context, inLoopOrSwitch);\n    }\n    else if (!(tree instanceof Lisp)) {\n        done(undefined, tree);\n    }\n    else if (tree.op === 'await') {\n        if (!isAsync) {\n            done(new SandboxError(\"Illegal use of 'await', must be inside async function\"));\n        }\n        else if ((_a = context.ctx.prototypeWhitelist) === null || _a === void 0 ? void 0 : _a.has(Promise.prototype)) {\n            execAsync(ticks, tree.a, scope, context, async (e, r) => {\n                if (e)\n                    done(e);\n                else\n                    try {\n                        done(undefined, await valueOrProp(r, context));\n                    }\n                    catch (err) {\n                        done(err);\n                    }\n            }, inLoopOrSwitch).catch(done);\n        }\n        else {\n            done(new SandboxError('Async/await is not permitted'));\n        }\n    }\n    else if (unexecTypes.has(tree.op)) {\n        try {\n            ops.get(tree.op)(exec, done, ticks, tree.a, tree.b, tree, context, scope, undefined, inLoopOrSwitch);\n        }\n        catch (err) {\n            done(err);\n        }\n    }\n    else {\n        return false;\n    }\n    return true;\n}\nfunction executeTree(ticks, context, executionTree, scopes = [], inLoopOrSwitch) {\n    return syncDone((done) => executeTreeWithDone(execSync, done, ticks, context, executionTree, scopes, inLoopOrSwitch)).result;\n}\nasync function executeTreeAsync(ticks, context, executionTree, scopes = [], inLoopOrSwitch) {\n    let ad;\n    return (ad = asyncDone((done) => executeTreeWithDone(execAsync, done, ticks, context, executionTree, scopes, inLoopOrSwitch))).isInstant === true ? ad.instant : (await ad.p).result;\n}\nfunction executeTreeWithDone(exec, done, ticks, context, executionTree, scopes = [], inLoopOrSwitch) {\n    if (!executionTree) {\n        done();\n        return;\n    }\n    if (!(executionTree instanceof Array)) {\n        throw new SyntaxError('Bad execution tree');\n    }\n    let scope = context.ctx.globalScope;\n    let s;\n    while (s = scopes.shift()) {\n        if (typeof s !== \"object\")\n            continue;\n        if (s instanceof Scope) {\n            scope = s;\n        }\n        else {\n            scope = new Scope(scope, s, s instanceof LocalScope ? undefined : null);\n        }\n    }\n    if (context.ctx.options.audit && !context.ctx.auditReport) {\n        context.ctx.auditReport = {\n            globalsAccess: new Set(),\n            prototypeAccess: {},\n        };\n    }\n    if (exec === execSync) {\n        _executeWithDoneSync(done, ticks, context, executionTree, scope, inLoopOrSwitch);\n    }\n    else {\n        _executeWithDoneAsync(done, ticks, context, executionTree, scope, inLoopOrSwitch).catch(done);\n    }\n}\nfunction _executeWithDoneSync(done, ticks, context, executionTree, scope, inLoopOrSwitch) {\n    if (!(executionTree instanceof Array))\n        throw new SyntaxError('Bad execution tree');\n    let i = 0;\n    for (i = 0; i < executionTree.length; i++) {\n        let res;\n        let err;\n        const current = executionTree[i];\n        try {\n            execSync(ticks, current, scope, context, (e, r) => {\n                err = e;\n                res = r;\n            }, inLoopOrSwitch);\n        }\n        catch (e) {\n            err = e;\n        }\n        if (err) {\n            done(err);\n            return;\n        }\n        if (res instanceof ExecReturn) {\n            done(undefined, res);\n            return;\n        }\n        if (current instanceof Lisp && current.op === 'return') {\n            done(undefined, new ExecReturn(context.ctx.auditReport, res, true));\n            return;\n        }\n    }\n    done(undefined, new ExecReturn(context.ctx.auditReport, undefined, false));\n}\nasync function _executeWithDoneAsync(done, ticks, context, executionTree, scope, inLoopOrSwitch) {\n    if (!(executionTree instanceof Array))\n        throw new SyntaxError('Bad execution tree');\n    let i = 0;\n    for (i = 0; i < executionTree.length; i++) {\n        let res;\n        let err;\n        const current = executionTree[i];\n        try {\n            await execAsync(ticks, current, scope, context, (e, r) => {\n                err = e;\n                res = r;\n            }, inLoopOrSwitch);\n        }\n        catch (e) {\n            err = e;\n        }\n        if (err) {\n            done(err);\n            return;\n        }\n        if (res instanceof ExecReturn) {\n            done(undefined, res);\n            return;\n        }\n        if (current instanceof Lisp && current.op === 'return') {\n            done(undefined, new ExecReturn(context.ctx.auditReport, res, true));\n            return;\n        }\n    }\n    done(undefined, new ExecReturn(context.ctx.auditReport, undefined, false));\n}\n\nclass SandboxGlobal {\n    constructor(globals) {\n        if (globals === globalThis)\n            return globalThis;\n        for (let i in globals) {\n            this[i] = globals[i];\n        }\n    }\n}\nclass ExecContext {\n    constructor(ctx, constants, tree, getSubscriptions, setSubscriptions, changeSubscriptions, setSubscriptionsGlobal, changeSubscriptionsGlobal, evals, registerSandboxFunction) {\n        this.ctx = ctx;\n        this.constants = constants;\n        this.tree = tree;\n        this.getSubscriptions = getSubscriptions;\n        this.setSubscriptions = setSubscriptions;\n        this.changeSubscriptions = changeSubscriptions;\n        this.setSubscriptionsGlobal = setSubscriptionsGlobal;\n        this.changeSubscriptionsGlobal = changeSubscriptionsGlobal;\n        this.evals = evals;\n        this.registerSandboxFunction = registerSandboxFunction;\n    }\n}\nfunction subscribeSet(obj, name, callback, context) {\n    const names = context.setSubscriptions.get(obj) || new Map();\n    context.setSubscriptions.set(obj, names);\n    const callbacks = names.get(name) || new Set();\n    names.set(name, callbacks);\n    callbacks.add(callback);\n    let changeCbs;\n    if (obj && obj[name] && typeof obj[name] === \"object\") {\n        changeCbs = context.changeSubscriptions.get(obj[name]) || new Set();\n        changeCbs.add(callback);\n        context.changeSubscriptions.set(obj[name], changeCbs);\n    }\n    return {\n        unsubscribe: () => {\n            callbacks.delete(callback);\n            changeCbs === null || changeCbs === void 0 ? void 0 : changeCbs.delete(callback);\n        }\n    };\n}\nclass Sandbox {\n    constructor(options) {\n        this.setSubscriptions = new WeakMap();\n        this.changeSubscriptions = new WeakMap();\n        this.sandboxFunctions = new WeakMap();\n        options = Object.assign({\n            audit: false,\n            forbidFunctionCalls: false,\n            forbidFunctionCreation: false,\n            globals: Sandbox.SAFE_GLOBALS,\n            prototypeWhitelist: Sandbox.SAFE_PROTOTYPES,\n            prototypeReplacements: new Map(),\n        }, options || {});\n        const sandboxGlobal = new SandboxGlobal(options.globals);\n        this.context = {\n            sandbox: this,\n            globalsWhitelist: new Set(Object.values(options.globals)),\n            prototypeWhitelist: new Map([...options.prototypeWhitelist].map((a) => [a[0].prototype, a[1]])),\n            options,\n            globalScope: new Scope(null, options.globals, sandboxGlobal),\n            sandboxGlobal\n        };\n        this.context.prototypeWhitelist.set(Object.getPrototypeOf([][Symbol.iterator]()), new Set());\n    }\n    static get SAFE_GLOBALS() {\n        return {\n            Function,\n            console: {\n                debug: console.debug,\n                error: console.error,\n                info: console.info,\n                log: console.log,\n                table: console.table,\n                warn: console.warn\n            },\n            isFinite,\n            isNaN,\n            parseFloat,\n            parseInt,\n            decodeURI,\n            decodeURIComponent,\n            encodeURI,\n            encodeURIComponent,\n            escape,\n            unescape,\n            Boolean,\n            Number,\n            BigInt,\n            String,\n            Object,\n            Array,\n            Symbol,\n            Error,\n            EvalError,\n            RangeError,\n            ReferenceError,\n            SyntaxError,\n            TypeError,\n            URIError,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Intl,\n            JSON,\n            Math,\n            Date,\n            RegExp\n        };\n    }\n    static get SAFE_PROTOTYPES() {\n        let protos = [\n            SandboxGlobal,\n            Function,\n            Boolean,\n            Number,\n            BigInt,\n            String,\n            Date,\n            Error,\n            Array,\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n            Int16Array,\n            Uint16Array,\n            Int32Array,\n            Uint32Array,\n            Float32Array,\n            Float64Array,\n            Map,\n            Set,\n            WeakMap,\n            WeakSet,\n            Promise,\n            Symbol,\n            Date,\n            RegExp\n        ];\n        let map = new Map();\n        protos.forEach((proto) => {\n            map.set(proto, new Set());\n        });\n        map.set(Object, new Set([\n            'entries',\n            'fromEntries',\n            'getOwnPropertyNames',\n            'is',\n            'keys',\n            'hasOwnProperty',\n            'isPrototypeOf',\n            'propertyIsEnumerable',\n            'toLocaleString',\n            'toString',\n            'valueOf',\n            'values'\n        ]));\n        return map;\n    }\n    subscribeGet(callback, context) {\n        context.getSubscriptions.add(callback);\n        return { unsubscribe: () => context.getSubscriptions.delete(callback) };\n    }\n    subscribeSet(obj, name, callback, context) {\n        return subscribeSet(obj, name, callback, context);\n    }\n    subscribeSetGlobal(obj, name, callback) {\n        return subscribeSet(obj, name, callback, this);\n    }\n    static audit(code, scopes = []) {\n        const globals = {};\n        for (let i of Object.getOwnPropertyNames(globalThis)) {\n            globals[i] = globalThis[i];\n        }\n        const sandbox = new Sandbox({\n            globals,\n            audit: true,\n        });\n        return sandbox.executeTree(sandbox.createContext(sandbox.context, parse(code)), scopes);\n    }\n    static parse(code) {\n        return parse(code);\n    }\n    createContext(context, executionTree) {\n        const evals = new Map();\n        const execContext = new ExecContext(context, executionTree.constants, executionTree.tree, new Set(), new WeakMap(), new WeakMap(), this.setSubscriptions, this.changeSubscriptions, evals, (fn) => this.sandboxFunctions.set(fn, execContext));\n        const func = sandboxFunction(execContext);\n        evals.set(Function, func);\n        evals.set(eval, sandboxedEval(func));\n        evals.set(setTimeout, sandboxedSetTimeout(func));\n        evals.set(setInterval, sandboxedSetInterval(func));\n        return execContext;\n    }\n    getContext(fn) {\n        return this.sandboxFunctions.get(fn);\n    }\n    executeTree(context, scopes = []) {\n        return executeTree({\n            ticks: BigInt(0),\n        }, context, context.tree, scopes);\n    }\n    executeTreeAsync(context, scopes = []) {\n        return executeTreeAsync({\n            ticks: BigInt(0),\n        }, context, context.tree, scopes);\n    }\n    compile(code, optimize = false) {\n        const parsed = parse(code, optimize);\n        const exec = (...scopes) => {\n            const context = this.createContext(this.context, parsed);\n            return { context, run: () => this.executeTree(context, [...scopes]).result };\n        };\n        return exec;\n    }\n    ;\n    compileAsync(code, optimize = false) {\n        const parsed = parse(code, optimize);\n        const exec = (...scopes) => {\n            const context = this.createContext(this.context, parsed);\n            return { context, run: () => this.executeTreeAsync(context, [...scopes]).then((ret) => ret.result) };\n        };\n        return exec;\n    }\n    ;\n    compileExpression(code, optimize = false) {\n        const parsed = parse(code, optimize, true);\n        const exec = (...scopes) => {\n            const context = this.createContext(this.context, parsed);\n            return { context, run: () => this.executeTree(context, [...scopes]).result };\n        };\n        return exec;\n    }\n    compileExpressionAsync(code, optimize = false) {\n        const parsed = parse(code, optimize, true);\n        const exec = (...scopes) => {\n            const context = this.createContext(this.context, parsed);\n            return { context, run: () => this.executeTreeAsync(context, [...scopes]).then((ret) => ret.result) };\n        };\n        return exec;\n    }\n}\n\nexports.ExecContext = ExecContext;\nexports.FunctionScope = FunctionScope;\nexports.LocalScope = LocalScope;\nexports.SandboxGlobal = SandboxGlobal;\nexports.assignCheck = assignCheck;\nexports.asyncDone = asyncDone;\nexports['default'] = Sandbox;\nexports.execAsync = execAsync;\nexports.execMany = execMany;\nexports.execSync = execSync;\nexports.executeTree = executeTree;\nexports.executeTreeAsync = executeTreeAsync;\nexports.executionOps = ops;\nexports.expectTypes = expectTypes;\nexports.setLispType = setLispType;\nexports.syncDone = syncDone;\n",null,null,null],"names":["Object","defineProperty","value","parseHexToInt","hex","isOnlyHexChars","match","parseInt","NaN","validateAndParseHex","errorName","enforcedLength","parsedHex","Number","isNaN","undefined","length","SyntaxError","parseHexadecimalCode","code","parsedCode","String","fromCharCode","parseUnicodeCode","surrogateCode","parsedSurrogateCode","isCurlyBraced","text","charAt","parseUnicodeCodePointCode","codePoint","withoutBraces","slice","fromCodePoint","err","RangeError","singleCharacterEscapes","Map","parseSingleCharacterCode","get","escapeMatch","unraw","raw","replace","_","backslash","unicodeWithSurrogate","surrogate","unicode","octal","singleCharacter","lispTypes","ParseError","Error","constructor","message","substring","Lisp","obj","op","a","b","If","t","f","KeyVal","key","val","SpreadObject","item","SpreadArray","lispArrayKey","toLispArray","arr","lisp","inlineIfElse","elseIf","ifElse","space","expectTypes","splitter","types","opHigh","comparitor","boolOp","bitwise","next","inlineIf","assignment","assignModify","assign","incrementerBefore","expEdge","call","incrementerAfter","modifier","not","inverse","negative","positive","typeof","delete","dot","arrayProp","prop","createObject","createArray","number","string","literal","regex","boolean","null","und","arrowFunctionSingle","arrowFunction","inlineFunction","group","Infinity","void","await","new","throw","initialize","return","spreadObject","spreadArray","expEnd","expFunction","function","expSingle","for","do","while","loopAction","if","try","block","switch","closings","testMultiple","str","tests","found","i","test","exec","CodeString","ref","start","end","len","char","toString","trimStart","trim","valueOf","emptyString","okFirstChars","aNumber","wordReg","semiColon","insertedSemicolons","WeakMap","quoteCache","restOfExp","constants","part","quote","firstOpening","closingsTests","details","words","isStart","hasSemiTest","includes","filter","insertedSemis","cache","set","has","escape","done","lastChar","isOneLiner","lastInertedSemi","skip","sub","regRes","foundWord","foundNumber","push","lastAnyWord","lastWord","oneliner","startingExecpted","setLispType","fn","forEach","type","closingsCreate","res","expect","ctx","extract","arg","l","funcFound","lispifyExpr","map","e","lispify","lispTree","quoteCount","extractIfElse","_a","count","foundElse","foundTrue","first","elseReg","startsWith","ie","all","Math","max","true","false","condition","startTrue","trueBlock","elseBlock","lispifyBlock","indexOf","statement","insertSemicolons","caseFound","caseTest","cases","defaultFound","cond","bracketFound","exprs","notEmpty","index","matches","primitives","BigInt","JSON","parse","isArrow","isReturn","argPos","isAsync","args","split","unshift","ended","func","eager","lispifyFunction","iteratorRegex","startStep","startInternal","getIterator","beforeStep","checkFirst","step","body","lispifyReturnExpr","extract2","k","iterator","ofStart2","ofStart3","ofCondition","ofStep","inStart2","inStart3","inStep","inCondition","shift","isBlock","catchReg","catchRes","finallyBody","exception","catchBody","offset","argsString","j","lastType","expected","topLevel","startingExpectedWithoutSingle","r","subExpressions","pos","values","defined","expression","parts","skipped","isInserted","flat","tree","hoisted","hoist","concat","Array","isArray","rep","it","closingsNoInsertion","colonsRegex","rest","inserted","valid","edge","checkRegex","cancel","after","flags","notDivide","possibleDivide","extractConstants","currentEnclosure","regexFound","comment","commentStart","currJs","strRes","enclosures","isPossibleDivide","literals","join","strings","pop","regexes","js","ExecReturn","auditReport","result","returned","breakLoop","continueLoop","Prop","context","isConst","isGlobal","isVariable","ReferenceError","getSubscriptions","cb","optional","reservedWords","Set","VarType","keysOnly","ret","Scope","parent","vars","functionThis","const","let","var","isFuncScope","allVars","globals","functionScope","this","hasOwnProperty","TypeError","SandboxError","declare","FunctionScope","LocalScope","currentTicks","sandboxFunction","ticks","SandboxFunction","params","parsed","createFunction","generateArgs","argNames","sandboxedFunctions","WeakSet","scope","name","options","forbidFunctionCreation","executeTree","sandboxedObject","registerSandboxFunction","add","createFunctionAsync","prototypeWhitelist","Promise","prototype","executeTreeAsync","sandboxedEval","sandboxEval","sandboxedSetTimeout","sandboxSetTimeout","handler","setTimeout","sandboxedSetInterval","sandboxSetInterval","setInterval","assignCheck","_b","_c","_d","_e","_f","_g","_h","changeSubscriptions","changeSubscriptionsGlobal","setSubscriptions","setSubscriptionsGlobal","arrayChange","splice","reverse","sort","copyWithin","literalRegex","ops2","sandboxGlobal","audit","globalsAccess","globalsWhitelist","evals","globalThis","globalScope","Boolean","isFunction","prototypeAccess","prot","getPrototypeOf","whitelist","prototypeReplacements","size","constuctor","g","forbidFunctionCalls","execMany","vals","stringify","recurse","x","y","change","changed","added","removed","startIndex","deleteCount","min","endIndex","items","reg","RegExp","resnums","processed","reses","num","$$","$","valueOrProp","bobj","loop","loopScope","internalVars","interalScope","execAsync","ad","asyncDone","d","isInstant","instant","p","innerLoopVars","catch","syncDone","inLoopOrSwitch","executeTreeWithDone","toTest","execSync","isTrue","caseItem","sc","ops","_execManySync","_execManyAsync","callback","resolve","reject","doneOriginal","_execNoneRecurse","unexecTypes","executionQuota","onExecutionQuotaReached","executionTree","scopes","s","_executeWithDoneSync","_executeWithDoneAsync","current","SandboxGlobal","ExecContext","subscribeSet","names","callbacks","changeCbs","unsubscribe","Sandbox","sandboxFunctions","SAFE_GLOBALS","SAFE_PROTOTYPES","sandbox","Symbol","Function","console","debug","error","info","log","table","warn","isFinite","parseFloat","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","unescape","EvalError","URIError","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","Intl","Date","protos","proto","subscribeGet","subscribeSetGlobal","getOwnPropertyNames","createContext","execContext","eval","getContext","compile","optimize","run","compileAsync","then","compileExpression","compileExpressionAsync","exports","elementStorage","ownerDoc","coll","ownerDocument","isIterable","createClass","sanitizer","arrs","defaultDelegateObject","on","elem","event","$el","wrap","off","one","ElementCollection","$elements","selector","some","every","compareDocumentPosition","sorted","unique","from","toSet","toArray","is","sel","querySelectorAll","parents","contains","find","c","events","opt","objectOrProp","ev","h","wrapEvent","store","getStore","evStore","addEventListener","removeEventListener","clear","trigger","eventType","detail","bubbles","cancelable","CustomEvent","dispatchEvent","evcb","evt","delegate","that","del","once","started","evs","subs","cbs","allCbs","target","listeners","lts","parentElement","eq","handlers","stoppedPropagation","stoppedImmediatePropagation","remove","cbev","click","addClass","toLowerCase","currentTarget","HTMLElement","getAttribute","attr","tabindex","role","hover","handlerIn","handlerOut","v","santizeAttribute","setAttribute","nodeName","removeAttr","removeAttribute","HTMLInputElement","HTMLSelectElement","selected","HTMLTextAreaElement","checked","files","multiple","$elems","scrollTop","scrollLeft","label","owner","data","removeData","toggleClass","removeClass","force","isObject","className","classList","toggle","hasClass","nameArr","identifier","ind","prevAll","last","nextElementSibling","nextUntil","propElem","nextAll","prev","previousElementSibling","prevUntil","siblings","children","firstElementChild","iframeInner","HTMLIFrameElement","contentDocument","originalEvent","isEqEvent","sip","stopImmediatePropagation","sp","stopPropagation","props","stopppedImmediatePropagation","defineProperties","NodeList","HTMLCollection","doc","selectors","$context","documentElement","elems","doFilter","doSort","Element","cElem","cont","collection","includeFirst","stopAt","sSelector","each","wasSet","n","object","el","objArr","defaultValue","deleteStore","regHrefJS","regValidSrc","regSystemAtt","defaultHTMLWhiteList","HTMLBRElement","HTMLBodyElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDivElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHeadingElement","HTMLLIElement","HTMLLegendElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLOutputElement","HTMLParagraphElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSpanElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableRowElement","HTMLTimeElement","HTMLTitleElement","HTMLUListElement","HTMLUnknownElement","HTMLTemplateElement","HTMLCanvasElement","globalAllowedAtttributes","sanitizeType","allowedAttributes","element","attributes","reservedAtrributes","HTMLSanitizer","HTMLAnchorElement","HTMLAreaElement","HTMLButtonElement","HTMLOptGroupElement","HTMLOptionElement","HTMLLabelElement","HTMLScriptElement","staticHtml","html","innerHTML","setAttributeForced","src","srcdoc","HTMLStyleElement","HTMLPictureElement","HTMLImageElement","HTMLAudioElement","HTMLTrackElement","HTMLVideoElement","HTMLSourceElement","attName","attValue","preprocess","allowed","srcAttributes","isJs","hasAttribute","allowedInputs","isAttributeForced","sanitizeHTML","DocumentFragment","att","nodeValue","content","reserved","observeAttribute","persistant","sanitize","observeLoad","observer","MutationObserver","muts","mut","addedNodes","document","readyState","observe","childList","subtree","disconnect","loading","isFound","regVarName","regKeyValName","getRootScope","skope","RootScope","getRootElement","Component","quotes","walkText","endJs","closing","inJs","strs","calls","timer","toCall","runDirective","dir","directives","directive","createErrorCb","createError","eQuery","ElementScope","$dispatch","$watch","subUnsubs","watch","unsubNested","$delay","ms","$wrap","contentElem","detach","currentSubs","getScopes","createElement","prevSub","sty","head","appendChild","replaceWith","styles","wrapElem","css","st","preprocessHTML","registerTemplates","processHTML","textContent","FileList","File","defineDirective","watchRun","lastVal","getScope","div","$$templatesAttr","querySelector","template","$templates","attribute","setAttributeNode","cloneNode","slotContent","createDocumentFragment","append","childNodes","slot","detached","pushScope","run2","isContentEditable","reset","$$value","form","$form","Node","lastPromise","root","newScope","varSubsStore","createVarSubs","varSubs","child","id","walkerInstance","execSteps","ready","runNested","skipFirst","walkTree","unsub","msg","parentSubs","walkNested","nodeType","nodes","endsWith","placeholder","createTextNode","before","createComment","ifElem","at","nestedSubs","getAttributeNode","exp","varsExp","varMatch","doubleMatch","runs","repeat","forSubs","$index","original","outerHTML","elementScopeAdded","letter","toUpperCase","nestedScopes","loaded","styleIds","sheet","cssRules","rule","CSSStyleRule","CSSKeyframesRule","deleteRule","cssText","style","insertRule","selectorText","$element","entries","SVGElement","transitionParts","debouce","throttle","queue","transitionVar","trans","evCb","$event","clearTimeout","eobj","q","Skope","allowRegExp","executionQuote","defineComponent","comp","components","toWatch","errorCb","watchGets","update","now","ignore","digest","list","mod","promise","temp","codes","sandboxCache","init","component","alreadyPreprocessed","sub2"],"mappings":"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"}