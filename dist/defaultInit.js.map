{"version":3,"file":"defaultInit.js","sources":["../src/HTMLSanitizer.ts","../src/defaultInit.ts"],"sourcesContent":[null,null],"names":["regHrefJS","regValidSrc","regSystemAtt","defaultHTMLWhiteList","HTMLBRElement","HTMLBodyElement","HTMLDListElement","HTMLDataElement","HTMLDataListElement","HTMLDialogElement","HTMLDivElement","HTMLFieldSetElement","HTMLFormElement","HTMLHRElement","HTMLHeadingElement","HTMLLIElement","HTMLLegendElement","HTMLMapElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLOutputElement","HTMLParagraphElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLSpanElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableSectionElement","HTMLTableRowElement","HTMLTimeElement","HTMLTitleElement","HTMLUListElement","HTMLUnknownElement","HTMLTemplateElement","HTMLCanvasElement","HTMLElement","globalAllowedAtttributes","Set","sanitizeType","obj","t","allowedAttributes","element","s","type","types","set","attributes","styleIds","reservedAtrributes","WeakMap","HTMLSanitizer","constructor","Map","HTMLAnchorElement","HTMLAreaElement","el","HTMLButtonElement","HTMLInputElement","HTMLSelectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLLabelElement","HTMLTextAreaElement","HTMLScriptElement","staticHtml","HTMLIFrameElement","setAttributeForced","innerHTML","src","srcdoc","processedStyles","WeakSet","HTMLStyleElement","loaded","parent","parentElement","has","add","isAttributeForced","removeAttribute","id","getAttribute","i","sheet","cssRules","length","rule","reverse","CSSStyleRule","CSSKeyframesRule","deleteRule","cssText","style","insertRule","selectorText","addEventListener","HTMLPictureElement","HTMLImageElement","HTMLAudioElement","HTMLTrackElement","HTMLVideoElement","HTMLSourceElement","santizeAttribute","attName","attValue","preprocess","allowed","get","toLowerCase","match","test","setAttribute","slice","srcAttributes","isJs","hasAttribute","substring","allowedInputs","sanitizeHTML","DocumentFragment","remove","att","nodeValue","nodeName","includes","children","elem","value","reserved","observeAttribute","cb","persistant","subs","selector","sanitize","observeLoad","Promise","resolve","observer","MutationObserver","muts","mut","target","addedNodes","Element","document","readyState","setTimeout","sub","observe","childList","subtree","disconnect","delete","matches","loading","found","isFound","then","querySelectorAll","cancel","sanitizer","imps","init","pop","mod","skope","default","undefined","canceled","documentElement","push","globalThis","cancelSkope"],"mappings":"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"}